<!--
  Deployment Notes (production hosting)

  Expected folder structure (case-sensitive on Netlify/Vercel/GitHub Pages):
  - /assets/logo/                 (site logo files, e.g. white-logo.png)
  - /assets/profile/              (about/profile photo)
  - /assets/works/<project>/      (images + non-video media used in Works + Featured)
  - /assets/video/<project>/      (mp4/mov/webm used in Works)
  - /assets/pdf/<project>/        (pdf used in Works + Resume)

  Config values to set after hosting:
  - const SITE_URL = "https://YOUR_DOMAIN_HERE";        // no trailing slash preferred
  - const OG_IMAGE = SITE_URL + "/assets/og/og-image.jpg";

  Hosting notes:
  - Avoid Windows paths (C:\Users\...) and file:// URLs; everything must be web paths.
  - Keep file/folder casing consistent (Linux hosts are case-sensitive).
-->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <!-- Primary Meta Tags -->
  <title>Alvin Zhou - Graphic & Interaction Designer | Portfolio</title>
  <meta name="title" content="Alvin Zhou - Graphic & Interaction Designer | Portfolio">
  <meta name="description" content="Portfolio of Alvin Zhou, Graphic & Interaction Designer. Featured works include UI/UX design, brand identity, and creative coding projects.">
  <meta name="author" content="Alvin Zhou">
  
  <!-- Open Graph / Facebook -->
  <meta property="og:type" content="website">
  <meta property="og:url" content="">
  <meta property="og:title" content="Alvin Zhou - Graphic & Interaction Designer">
  <meta property="og:description" content="Portfolio of Alvin Zhou, Graphic & Interaction Designer. Featured works include UI/UX design, brand identity, and creative coding projects.">
  <meta property="og:image" content="">
  
  <!-- Twitter -->
  <meta property="twitter:card" content="summary_large_image">
  <meta property="twitter:url" content="">
  <meta property="twitter:title" content="Alvin Zhou - Graphic & Interaction Designer">
  <meta property="twitter:description" content="Portfolio of Alvin Zhou, Graphic & Interaction Designer. Featured works include UI/UX design, brand identity, and creative coding projects.">
  <meta property="twitter:image" content="">

  <script>
    // SEO/OG config (set after hosting)
    const SITE_URL = ""; // e.g. "https://your-site.netlify.app" or "https://yourdomain.com"
    const OG_IMAGE = ""; // e.g. SITE_URL + "/assets/og/og-image.jpg"

    (function applySocialMeta() {
      const resolvedSiteUrl = (SITE_URL && SITE_URL.trim()) ? SITE_URL.trim().replace(/\/+$/, '') : window.location.origin;
      const resolvedOgImage = (OG_IMAGE && OG_IMAGE.trim()) ? OG_IMAGE.trim() : (resolvedSiteUrl + "/assets/og/og-image.jpg");

      const setMeta = (selector, value) => {
        const el = document.querySelector(selector);
        if (el) el.setAttribute('content', value);
      };

      setMeta('meta[property="og:url"]', resolvedSiteUrl + "/");
      setMeta('meta[property="twitter:url"]', resolvedSiteUrl + "/");
      setMeta('meta[property="og:image"]', resolvedOgImage);
      setMeta('meta[property="twitter:image"]', resolvedOgImage);

      // Keep JSON-LD URL in sync if present
      const ld = document.querySelector('script[type="application/ld+json"]');
      if (ld) {
        try {
          const data = JSON.parse(ld.textContent || '{}');
          if (data && typeof data === 'object') {
            data.url = resolvedSiteUrl;
            ld.textContent = JSON.stringify(data, null, 2);
          }
        } catch (_) {}
      }
    })();
  </script>
  
  <!-- Favicons -->
  <link rel="icon" type="image/x-icon" href="./favicon.ico">
  <link rel="apple-touch-icon" sizes="180x180" href="./apple-touch-icon.png">
  
  <!-- Fonts with optimized loading -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@1,500&display=swap" rel="stylesheet">
  
  <!-- Structured Data -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "Person",
    "name": "Alvin Zhou",
    "jobTitle": "Graphic & Interaction Designer",
    "url": "https://alvinzhou.com",
    "sameAs": [
      "https://www.linkedin.com/in/alvin-zhou-392763218/"
    ],
    "email": "no360717@gmail.com"
  }
  </script>
  <style>
    /* ========================================
       DESIGN SYSTEM - CSS Custom Properties
       ======================================== */
    :root {
      /* === Spacing Scale (8px base) === */
      --space-xs: 4px;
      --space-sm: 8px;
      --space-md: 16px;
      --space-lg: 24px;
      --space-xl: 32px;
      --space-2xl: 48px;
      --space-3xl: 64px;
      --space-4xl: 96px;
      
      /* === Home Layout Spacing === */
      /* Push the Home content lower + keep sections separated (responsive) */
      --home-top-padding: clamp(220px, 24vh, 360px);
      --home-bottom-padding: clamp(160px, 18vh, 260px);
      --home-title-btn-gap: 44px;
      --home-btn-featured-gap: clamp(170px, 18vh, 320px); /* increase this to push FEATURED WORKS down */
      /* Extra explicit spacing (fallback if grid spacing is overridden somewhere) */
      --home-hero-offset: 140px;
      --home-buttons-offset: 360px;
      --home-featured-offset: 460px;
      --home-featured-carousel-offset: 180px;
      
      /* === Typography Scale === */
      --text-xs: 0.75rem;      /* 12px */
      --text-sm: 0.875rem;     /* 14px */
      --text-base: 1rem;       /* 16px */
      --text-md: 1.125rem;     /* 18px */
      --text-lg: 1.25rem;      /* 20px */
      --text-xl: 1.5rem;       /* 24px */
      --text-2xl: 2rem;        /* 32px */
      --text-3xl: 2.5rem;      /* 40px */
      --text-4xl: 3rem;        /* 48px */
      --text-5xl: 4rem;        /* 64px */
      
      /* === Font Weights === */
      --font-normal: 400;
      --font-medium: 500;
      --font-semibold: 600;
      --font-bold: 700;
      
      /* === Border Radius === */
      --radius-sm: 6px;
      --radius-md: 12px;
      --radius-lg: 18px;
      --radius-xl: 24px;
      --radius-2xl: 32px;
      --radius-full: 9999px;
      
      /* === Shadows === */
      --shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.15);
      --shadow-md: 0 4px 16px rgba(0, 0, 0, 0.2);
      --shadow-lg: 0 8px 32px rgba(0, 0, 0, 0.25);
      --shadow-xl: 0 16px 48px rgba(0, 0, 0, 0.3);
      --shadow-glow: 0 0 20px rgba(255, 255, 255, 0.15);
      
      /* === Colors === */
      --color-bg-primary: rgba(8, 5, 14, 0.98);
      --color-bg-secondary: rgba(3, 3, 6, 1);
      --color-text-primary: rgba(255, 255, 255, 0.95);
      --color-text-secondary: rgba(255, 255, 255, 0.75);
      --color-text-muted: rgba(255, 255, 255, 0.55);
      --color-border: rgba(255, 255, 255, 0.16);
      --color-border-hover: rgba(255, 255, 255, 0.28);
      --color-surface: rgba(255, 255, 255, 0.08);
      --color-surface-hover: rgba(255, 255, 255, 0.12);
      --color-accent-purple: rgba(194, 120, 220, 0.25);
      --color-accent-blue: rgba(90, 140, 230, 0.20);
      
      /* === Transitions === */
      --transition-fast: 150ms ease;
      --transition-base: 250ms ease;
      --transition-slow: 400ms ease;
      --transition-bounce: 400ms cubic-bezier(0.34, 1.56, 0.64, 1);
      
      /* === Z-Index Scale === */
      --z-base: 1;
      --z-dropdown: 100;
      --z-sticky: 500;
      --z-nav: 1000;
      --z-modal: 20000;
      
      /* === Container === */
      --container-max: 1400px;
      --container-padding: var(--space-lg);
    }
    
    /* === Focus Styles (Accessibility) === */
    *:focus-visible {
      outline: 2px solid rgba(255, 255, 255, 0.7);
      outline-offset: 3px;
    }
    
    /* === Reduced Motion === */
    @media (prefers-reduced-motion: reduce) {
      *,
      *::before,
      *::after {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
      }
    }

    /* ========================================
       Media fallbacks (missing assets safety)
       ======================================== */
    .media-fallback {
      display: flex;
      align-items: center;
      justify-content: center;
      width: 100%;
      height: 100%;
      min-height: 180px;
      border-radius: inherit;
      background:
        radial-gradient(800px 500px at 30% 30%, rgba(194, 120, 220, 0.22), transparent 60%),
        radial-gradient(700px 520px at 70% 70%, rgba(90, 140, 230, 0.18), transparent 62%),
        linear-gradient(180deg, rgba(255, 255, 255, 0.08), rgba(255, 255, 255, 0.03));
      border: 1px solid rgba(255, 255, 255, 0.14);
      color: rgba(255, 255, 255, 0.85);
      text-align: center;
      padding: 18px;
      box-sizing: border-box;
    }
    .media-fallback span {
      font-size: 0.95rem;
      letter-spacing: 0.02em;
    }
    
    /* === Improved Scrollbar === */
    ::-webkit-scrollbar {
      width: 10px;
      height: 10px;
    }
    ::-webkit-scrollbar-track {
      background: rgba(255, 255, 255, 0.05);
    }
    ::-webkit-scrollbar-thumb {
      background: rgba(255, 255, 255, 0.15);
      border-radius: var(--radius-full);
    }
    ::-webkit-scrollbar-thumb:hover {
      background: rgba(255, 255, 255, 0.25);
    }
    
    /* ========================================
       BASE STYLES
       ======================================== */
    html {
      overflow-x: hidden;
      overflow-y: auto;
      scrollbar-gutter: stable;
      height: 100%;
      scroll-behavior: smooth;
      background:
        radial-gradient(1200px 900px at 75% 30%, rgba(194, 120, 220, 0.25), transparent 60%),
        radial-gradient(900px 700px at 25% 75%, rgba(90, 140, 230, 0.20), transparent 62%),
        linear-gradient(180deg, rgba(8, 5, 14, 0.98), rgba(3, 3, 6, 1));
    }
    @media (prefers-reduced-motion: reduce) {
      html {
        scroll-behavior: auto;
      }
    }
    body {
      margin: 0;
      font-family: 'Poppins', 'Segoe UI', Arial, sans-serif;
      min-height: 100vh;
      background:
        radial-gradient(1200px 900px at 75% 30%, rgba(194, 120, 220, 0.25), transparent 60%),
        radial-gradient(900px 700px at 25% 75%, rgba(90, 140, 230, 0.20), transparent 62%),
        linear-gradient(180deg, rgba(8, 5, 14, 0.98), rgba(3, 3, 6, 1));
      color: #222;
      overflow-x: hidden;
      overflow-y: visible;
      height: auto;
      position: relative;
    }
    /* Always-on base background layer (prevents black side bands) */
    .base-bg {
      position: fixed;
      inset: 0;
      z-index: 0;
      pointer-events: none;
      background:
        radial-gradient(1200px 900px at 75% 30%, rgba(194, 120, 220, 0.45), transparent 60%),
        radial-gradient(900px 700px at 25% 75%, rgba(90, 140, 230, 0.35), transparent 62%),
        linear-gradient(180deg, rgba(18, 10, 28, 0.96), rgba(5, 6, 11, 0.98));
    }
    .animated-gradient-background {
      position: fixed;
      inset: 0;
      width: auto;
      height: auto;
      z-index: 1;
      pointer-events: none;
      opacity: 1;

      /* Always-on base wash so edges are never empty */
      background:
        radial-gradient(1200px 800px at 70% 35%, rgba(160, 90, 200, 0.35), transparent 60%),
        radial-gradient(900px 700px at 25% 70%, rgba(80, 120, 220, 0.30), transparent 62%),
        linear-gradient(180deg, rgba(20, 10, 30, 0.92), rgba(5, 6, 11, 0.96));

      mix-blend-mode: normal;
    }
    /* Canvas background */
    #bg-canvas {
      position: fixed;
      inset: 0;
      width: 100%;
      height: 100%;
      z-index: 1;
      pointer-events: none;
    }
    .gradient-blob {
      position: absolute;
      z-index: 1;
      filter: blur(80px);
      opacity: 0.7;
      will-change: transform;
      transition: none;
      mix-blend-mode: screen;
      display: none; /* Disabled - using canvas instead */
    }
    /* Cursor trail canvas overlay */
    * {
      box-sizing: border-box;
    }
    @keyframes gradientShift {
      0% {
        background-position: 0% 50%;
      }
      50% {
        background-position: 100% 50%;
      }
      100% {
        background-position: 0% 50%;
      }
    }
    nav {
      position: fixed;
      top: 10px;
      left: 0;
      right: 0;
      display: flex;
      justify-content: space-between;
      align-items: center;
      height: 60px;
      width: 100%;
      padding: 0 20px;
      z-index: 1000;
      transition: transform 0.15s ease-in-out;
      transform: translateY(0);
      box-sizing: border-box;
      border-bottom: none !important;
      box-shadow: none !important;
      background-image: none !important;
    }
    nav.hidden {
      transform: translateY(-100px);
    }
    .logo {
      height: 80px;
      width: auto;
      margin-top: 10px;
      opacity: 0;
      transition: opacity 0.3s ease;
    }
    .logo.visible {
      opacity: 1;
    }
    .logo img {
      height: 100%;
      width: auto;
      object-fit: contain;
    }
    .loading-screen {
      position: fixed;
      inset: 0;
      background: #000;
      z-index: 10000;
      display: flex;
      justify-content: center;
      align-items: center;
      overflow: hidden;
    }
    .loading-screen.hiding {
      animation: fadeOut 1.5s ease-in-out forwards;
    }
    .loading-logo {
      position: absolute;
      width: 200px;
      height: 200px;
      display: flex;
      justify-content: center;
      align-items: center;
      animation: logoMove 1.5s ease-in-out 1.5s forwards;
    }
    .loading-logo img {
      width: 100%;
      height: 100%;
      object-fit: contain;
    }
    .loading-bar-container {
      position: absolute;
      top: 60%;
      left: 50%;
      transform: translateX(-50%);
      width: 300px;
      height: 4px;
      background: rgba(255, 255, 255, 0.2);
      border-radius: 2px;
      overflow: hidden;
    }
    .loading-bar {
      height: 100%;
      width: 0%;
      background: white;
      border-radius: 2px;
      animation: loadingProgress 1.5s ease-in-out forwards;
    }
    @keyframes loadingProgress {
      0% { width: 0%; }
      100% { width: 100%; }
    }
    @keyframes fadeOut {
      0% { opacity: 1; }
      100% { opacity: 0; }
    }
    @keyframes logoMove {
      0% { top: 50%; left: 50%; transform: translate(-50%, -50%) scale(1); }
      100% { top: -40px; left: -35px; transform: translate(0, 0) scale(0.4); }
    }
    .nav-options {
      display: flex;
      justify-content: space-evenly;
      flex: 1;
      list-style: none;
      margin: 0;
      padding: 0;
    }
    .nav-options li {
      position: relative;
    }
    .nav-options a {
      text-decoration: none;
      color: white;
      font-weight: var(--font-medium);
      font-size: var(--text-md);
      padding: var(--space-sm) var(--space-md);
      min-height: 44px;
      display: inline-flex;
      align-items: center;
      transition: color var(--transition-fast), background var(--transition-fast);
      opacity: 0;
      animation: fadeInNav 0.5s ease forwards;
      border-radius: var(--radius-md);
    }
    .nav-options li:nth-child(1) a {
      animation-delay: 3.2s;
    }
    .nav-options li:nth-child(2) a {
      animation-delay: 3.4s;
    }
    .nav-options li:nth-child(3) a {
      animation-delay: 3.6s;
    }
    .nav-options li:nth-child(4) a {
      animation-delay: 3.8s;
    }
    @keyframes fadeInNav {
      from {
        opacity: 0;
        transform: translateY(10px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    .nav-options a:hover {
      color: var(--color-text-secondary);
      background: var(--color-surface);
    }
    .nav-options a:focus-visible {
      outline: 2px solid rgba(255, 255, 255, 0.7);
      outline-offset: 2px;
    }
    .nav-options a.active {
      color: white;
      background: var(--color-surface);
    }
    .main-content {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      min-height: calc(100vh - 60px);
      padding: 32px 12px;
      overflow: visible !important;
      padding-top: 100px;
      padding-bottom: 120px;
      text-align: center;
      width: 100%;
      box-sizing: border-box;
      border-top: none !important;
      overflow: visible;
      background: transparent;
      position: relative;
      z-index: 2;
    }
    .section {
      background: transparent;
      position: relative;
      z-index: 2;
      overflow: visible !important;
    }
    footer {
      background: transparent;
      color: white;
      width: 100%;
      padding: 4rem 2rem 2rem;
      margin-top: auto;
      position: relative;
      overflow: visible !important;
      z-index: 80;
    }
    
    footer::before {
      content: "";
      position: absolute;
      left: 0;
      right: 0;
      top: 0;
      bottom: 0;
      pointer-events: none;
      z-index: 0;
      background: radial-gradient(180% 160% at 50% 0%,
        rgba(0, 0, 0, 0.00) 8%,
        rgba(0, 0, 0, 0.78) 38%,
        rgba(0, 0, 0, 0.98) 100%
      );
      opacity: 1;
    }
    
    footer > * {
      position: relative;
      z-index: 1;
    }
    .footer-container {
      max-width: 1200px;
      margin: 0 auto;
      display: grid;
      grid-template-columns: 1fr 1fr 1fr;
      gap: 3rem;
      align-items: start;
      position: relative;
      z-index: 1;
    }
    .footer-section {
      display: flex;
      flex-direction: column;
      gap: 1rem;
    }
    .footer-section h3 {
      font-size: 1.5rem;
      font-weight: 600;
      margin: 0 0 1rem 0;
      color: white;
    }
    .footer-cta {
      text-align: center;
      grid-column: 1 / -1;
      padding-bottom: 2rem;
      border-bottom: 1px solid rgba(255, 255, 255, 0.2);
      margin-bottom: 2rem;
    }
    .footer-cta h2 {
      font-size: 2rem;
      font-weight: 600;
      margin: 0 0 1rem 0;
      color: white;
    }
    .footer-cta p {
      font-size: 1.1rem;
      margin: 0 0 1.5rem 0;
      color: rgba(255, 255, 255, 0.9);
    }
    .footer-cta-button {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      padding: var(--space-md) var(--space-xl);
      min-height: 48px;
      background: white;
      color: #000;
      text-decoration: none;
      border-radius: var(--radius-md);
      font-weight: var(--font-semibold);
      font-size: var(--text-base);
      transition: all var(--transition-base);
      cursor: pointer;
      border: none;
    }
    .footer-cta-button:hover {
      background: rgba(255, 255, 255, 0.92);
      transform: translateY(-3px);
      box-shadow: var(--shadow-md), 0 0 24px rgba(255, 255, 255, 0.25);
    }
    .footer-cta-button:focus-visible {
      outline: 2px solid rgba(255, 255, 255, 0.8);
      outline-offset: 4px;
    }
    .footer-cta-button:active {
      transform: translateY(-1px);
    }
    .footer-nav {
      list-style: none;
      padding: 0;
      margin: 0;
      display: flex;
      flex-direction: column;
      gap: 0.75rem;
    }
    .footer-nav a {
      color: var(--color-text-secondary);
      text-decoration: none;
      font-size: var(--text-base);
      transition: color var(--transition-fast);
      padding: var(--space-xs) 0;
      min-height: 44px;
      display: inline-flex;
      align-items: center;
    }
    .footer-nav a:hover {
      color: var(--color-text-primary);
    }
    .footer-nav a:focus-visible {
      outline: 2px solid rgba(255, 255, 255, 0.7);
      outline-offset: 2px;
    }
    .footer-links {
      display: flex;
      flex-direction: column;
      gap: var(--space-sm);
    }
    .footer-links a {
      color: var(--color-text-secondary);
      text-decoration: none;
      font-size: var(--text-base);
      transition: color var(--transition-fast);
      display: flex;
      align-items: center;
      gap: var(--space-sm);
      padding: var(--space-xs) 0;
      min-height: 44px;
    }
    .footer-links a:hover {
      color: var(--color-text-primary);
    }
    .footer-links a:focus-visible {
      outline: 2px solid rgba(255, 255, 255, 0.7);
      outline-offset: 2px;
    }
    .footer-links a::before {
      content: '→';
      transition: transform 0.3s ease;
    }
    .footer-links a:hover::before {
      transform: translateX(4px);
    }
    .footer-brand h3 {
      font-size: 1.8rem;
      font-weight: 600;
      margin: 0 0 0.5rem 0;
    }
    .footer-brand p {
      color: rgba(255, 255, 255, 0.6);
      font-size: 0.9rem;
      margin: 0;
    }
    .footer-copyright {
      grid-column: 1 / -1;
      text-align: center;
      padding-top: 2rem;
      border-top: 1px solid rgba(255, 255, 255, 0.2);
      margin-top: 2rem;
      color: rgba(255, 255, 255, 0.6);
      font-size: 0.9rem;
    }
    @media (max-width: 768px) {
      .footer-container {
        grid-template-columns: 1fr;
        gap: 2rem;
      }
      .footer-cta {
        grid-column: 1;
      }
      .footer-copyright {
        grid-column: 1;
      }
      .footer-cta h2 {
        font-size: 1.5rem;
      }
    }
    #home {
      display: grid;
      grid-template-rows:
        1fr
        auto              /* hero */
        var(--home-title-btn-gap)
        auto              /* buttons */
        var(--home-btn-featured-gap)
        auto              /* featured title */
        auto              /* featured carousel */
        1fr;
      justify-items: center;
      align-content: start;
      /* Ensure the 1fr rows actually have space to work with */
      min-height: calc(100vh - 60px);
      min-height: calc(100svh - 60px);
      padding-top: var(--home-top-padding) !important;
      padding-bottom: var(--home-bottom-padding) !important;
      row-gap: 0;
      width: 100%;
      max-width: 100%;
      box-sizing: border-box;
      padding-left: 20px;
      padding-right: 20px;
    }
    /* FIX: typing layout reserve - reserve space for full headline so nothing shifts on first load */
    .hero-type-wrap {
      grid-row: 2;
      min-height: clamp(3.2em, 4.5vw + 2em, 5em);
      height: clamp(3.2em, 4.5vw + 2em, 5em);
      display: flex;
      align-items: center;
      justify-content: center;
      margin-bottom: 0;
      /* Force the hero/title lower on the screen */
      margin-top: var(--home-hero-offset) !important;
    }
    .home-buttons {
      grid-row: 4;
      display: flex;
      gap: 5rem;
      flex-wrap: wrap;
      justify-content: center;
      z-index: 10;
      /* Force buttons lower below the title */
      margin-top: var(--home-buttons-offset) !important;
    }
    .home-button {
      padding: var(--space-md) var(--space-xl);
      min-height: 48px;
      min-width: 140px;
      border: 2px solid white;
      background: var(--color-surface);
      color: white;
      text-decoration: none;
      border-radius: var(--radius-full);
      font-size: var(--text-md);
      font-weight: var(--font-medium);
      transition: all var(--transition-base);
      cursor: pointer;
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
      display: inline-flex;
      align-items: center;
      justify-content: center;
    }
    .home-button:hover {
      background: rgba(255, 255, 255, 0.2);
      transform: translateY(-3px);
      box-shadow: var(--shadow-md), var(--shadow-glow);
    }
    .home-button:focus-visible {
      outline: 2px solid rgba(255, 255, 255, 0.8);
      outline-offset: 4px;
    }
    .home-button:active {
      transform: translateY(-1px);
    }
    /* FIX: home spacing - add +100px more vertical spacing between buttons and Featured Works */
    .featured-works-title {
      grid-row: 6;
      color: white;
      font-size: clamp(32px, 4vw, 64px);
      font-weight: 600;
      letter-spacing: 0.1em;
      text-transform: uppercase;
      z-index: 10;
      text-align: center;
      margin-top: 0;
      margin-bottom: 8px;
      pointer-events: none;
      /* Force Featured Works lower below buttons */
      margin-top: var(--home-featured-offset) !important;
    }
    .featured-works-squares {
      grid-row: 7;
      width: 100%;
      display: flex;
      flex-direction: row;
      align-items: center;
      justify-content: center;
      margin: 0 auto 28px;
      position: relative;
      /* Force carousel (and arrows) lower below the featured title */
      margin-top: var(--home-featured-carousel-offset) !important;
    }
    .carousel-arrow {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      width: 56px;
      height: 56px;
      min-width: 48px;
      min-height: 48px;
      border-radius: var(--radius-full);
      border: 2px solid rgba(255, 255, 255, 0.25);
      background: rgba(15, 12, 25, 0.85);
      color: white;
      font-size: 28px;
      line-height: 1;
      cursor: pointer;
      backdrop-filter: blur(16px);
      -webkit-backdrop-filter: blur(16px);
      transition: all var(--transition-base);
      z-index: var(--z-dropdown);
      display: flex;
      align-items: center;
      justify-content: center;
      padding-bottom: 2px;
      box-shadow: var(--shadow-md);
    }
    .carousel-arrow:hover {
      background: rgba(255, 255, 255, 0.12);
      border-color: rgba(255, 255, 255, 0.45);
      transform: translateY(-50%) scale(1.08);
      box-shadow: var(--shadow-lg), var(--shadow-glow);
    }
    .carousel-arrow:focus-visible {
      outline: 2px solid rgba(255, 255, 255, 0.8);
      outline-offset: 4px;
    }
    .carousel-arrow:active {
      transform: translateY(-50%) scale(0.98);
    }
    .carousel-arrow-left {
      left: calc(50% - 300px);
    }
    .carousel-arrow-right {
      right: calc(50% - 300px);
    }
    @media (max-width: 768px) {
      .carousel-arrow {
        width: 44px;
        height: 44px;
        font-size: 24px;
      }
      .carousel-arrow-left {
        left: calc(50% - 180px);
      }
      .carousel-arrow-right {
        right: calc(50% - 180px);
      }
    }
    .featured-works-squares-inner {
      display: flex;
      flex-direction: row;
      flex-wrap: nowrap;
      gap: 4rem;
      align-items: center;
      overflow-x: auto;
      overflow-y: visible;
      scroll-behavior: smooth;
      scrollbar-width: none;
      -ms-overflow-style: none;
      width: 100%;
      padding-top: 26px;
      padding-bottom: 26px;
      padding-left: calc(50vw - 225px);
      padding-right: calc(50vw - 225px);
    }
    .featured-works-squares-inner::-webkit-scrollbar {
      display: none;
    }
    .featured-square {
      width: 450px;
      height: 520px;
      min-height: 450px;
      flex-shrink: 0;
      position: relative;
      z-index: 1;
      cursor: pointer;
      opacity: 0.6;
      transform: scale(0.85);
      transition: all 0.4s ease;
    }
    .featured-square:hover {
      z-index: 50;
      opacity: 0.8;
    }
    .featured-square.spotlight {
      opacity: 1;
      transform: scale(1);
      z-index: 10;
    }
    .featured-square.spotlight::before {
      opacity: 1;
      filter: blur(18px);
    }
    .featured-square::before {
      content: "";
      position: absolute;
      inset: -18px;
      border-radius: 24px;
      background: radial-gradient(circle at 50% 40%, rgba(255, 255, 255, 0.14), rgba(0, 0, 0, 0));
      filter: blur(14px);
      opacity: 0.9;
      z-index: -1;
      pointer-events: none;
      transition: opacity 0.2s ease;
    }
    .featured-square:hover::before {
      opacity: 1;
    }
    .featured-square-inner {
      width: 100%;
      height: 100%;
      background: var(--color-surface);
      backdrop-filter: blur(32px);
      -webkit-backdrop-filter: blur(32px);
      border: 1px solid var(--color-border);
      border-radius: var(--radius-xl);
      overflow: hidden;
      position: relative;
      display: flex;
      flex-direction: column;
      align-items: center;
      text-align: center;
      padding: var(--space-lg) var(--space-lg) 0 var(--space-lg);
      box-shadow: 
        inset 0 1px 0 rgba(255, 255, 255, 0.12),
        var(--shadow-md);
      transition: transform var(--transition-base), box-shadow var(--transition-base);
    }
    .featured-square:hover .featured-square-inner {
      transform: translateY(-6px);
      box-shadow: 
        inset 0 1px 0 rgba(255, 255, 255, 0.15),
        var(--shadow-lg),
        var(--shadow-glow);
    }
    .featured-square:focus-visible {
      outline: 2px solid rgba(255, 255, 255, 0.7);
      outline-offset: 6px;
    }
    .featured-square .project-media {
      flex: 1 1 auto;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 18px 0 10px 0;
      max-height: 65%;
      overflow: hidden;
    }
    .featured-square img:not(.project-logo) {
      width: 88%;
      max-width: 420px;
      max-height: 300px;
      height: auto;
      object-fit: contain;
      display: block;
      position: relative;
      margin: 0;
      z-index: 0;
      opacity: 1;
      visibility: visible;
      filter: drop-shadow(0 28px 50px rgba(0, 0, 0, 0.35));
      transform: translateY(-6px);
    }
    .featured-square.spotswitch img:not(.project-logo) {
      width: 90%;
      max-width: 450px;
      max-height: 300px;
    }
    .featured-square.pixelpact .project-media img,
    .featured-square.reliefhub .project-media img,
    .featured-square.distributed .project-media img,
    .featured-square.sddw .project-media img,
    .featured-square.rill-insights .project-media img {
      width: 90%;
      max-width: 500px;
      max-height: 320px;
    }
    .featured-square.pixelpact .project-media,
    .featured-square.reliefhub .project-media,
    .featured-square.distributed .project-media,
    .featured-square.sddw .project-media,
    .featured-square.rill-insights .project-media {
      padding-top: 20px;
      padding-bottom: 10px;
    }
    .featured-square img:not(.project-logo)[src=""] {
      display: none;
    }
    .featured-square .project-overlay {
      display: flex;
      flex-direction: column;
      width: calc(100% + 52px);
      margin-left: -26px;
      margin-right: -26px;
      margin-top: auto;
      margin-bottom: 0;
      box-sizing: border-box;
      padding: 18px 26px 22px 26px;
      background: linear-gradient(
        to top,
        rgba(0, 0, 0, 0.55) 0%,
        rgba(0, 0, 0, 0.28) 55%,
        rgba(0, 0, 0, 0.0) 100%
      );
      border-radius: 0 0 22px 22px;
      z-index: 2;
      position: relative;
      gap: 6px;
      flex-shrink: 0;
      min-height: 120px;
    }
    .featured-square .project-overlay > * {
      border-radius: 0;
    }
    .featured-square .project-text {
      margin-top: 16px;
      display: flex;
      flex-direction: column;
      gap: 6px;
    }
    .featured-square .project-title {
      font-size: clamp(26px, 2.8vw, 42px);
      line-height: 1.2;
      font-weight: 600;
      color: white;
      margin-bottom: 0;
      text-shadow: 0 2px 8px rgba(0, 0, 0, 0.8), 0 0 20px rgba(255, 255, 255, 0.3);
    }
    .featured-square .project-descriptor {
      font-size: 0.95rem;
      color: rgba(255, 255, 255, 0.9);
      margin-bottom: 0;
      text-shadow: 0 2px 6px rgba(0, 0, 0, 0.8);
    }
    .featured-square .project-metadata {
      font-size: 0.85rem;
      color: rgba(255, 255, 255, 0.75);
      text-shadow: 0 2px 6px rgba(0, 0, 0, 0.8);
      line-height: 1.4;
    }
    .featured-square .project-logo {
      position: absolute;
      top: 1.5rem;
      right: 1.5rem;
      width: 80px;
      height: auto;
      opacity: 0.4;
      z-index: 1;
    }
    .view-works-button {
      position: relative;
      bottom: auto;
      left: auto;
      transform: none;
      padding: var(--space-md) var(--space-xl);
      min-height: 48px;
      border: 2px solid white;
      background: var(--color-surface);
      color: white;
      text-decoration: none;
      border-radius: var(--radius-full);
      font-size: var(--text-md);
      font-weight: var(--font-medium);
      transition: all var(--transition-base);
      cursor: pointer;
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
      z-index: 10;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      margin: 28px auto 0;
      grid-row: 2;
    }
    .view-works-button:hover {
      background: rgba(255, 255, 255, 0.2);
      transform: translateY(-3px);
      box-shadow: var(--shadow-md), var(--shadow-glow);
    }
    .view-works-button:focus-visible {
      outline: 2px solid rgba(255, 255, 255, 0.8);
      outline-offset: 4px;
    }
    .view-works-button:active {
      transform: translateY(-1px);
    }
    @media (max-width: 768px) {
      #home {
        grid-template-rows:
          1fr
          auto
          var(--home-title-btn-gap)
          auto
          var(--home-btn-featured-gap)
          auto
          auto
          1fr;
        /* Mobile: still clearly separated (stronger push-down) */
        --home-top-padding: clamp(190px, 22vh, 300px);
        --home-bottom-padding: clamp(150px, 18vh, 240px);
        --home-hero-offset: 110px;
        --home-buttons-offset: 270px;
        --home-featured-offset: 340px;
        --home-featured-carousel-offset: 120px;
        padding-top: var(--home-top-padding) !important;
        padding-bottom: var(--home-bottom-padding) !important;
      }
      /* FIX: typing layout reserve - mobile version */
      .hero-type-wrap {
        min-height: clamp(2.5em, 5.5vw + 1.5em, 4em);
        height: clamp(2.5em, 5.5vw + 1.5em, 4em);
        margin-bottom: 0;
      }
      .home-buttons {
        flex-direction: column;
        gap: 2rem;
        width: 100%;
        max-width: 300px;
      }
      .home-button {
        width: 100%;
        text-align: center;
      }
      /* FIX: home spacing - mobile version */
      .featured-works-title {
        font-size: clamp(24px, 5vw, 48px);
        grid-row: 6;
        margin-top: 0;
        margin-bottom: 5px;
      }
      .featured-works-squares-inner {
        gap: 2rem;
        padding-left: calc(50vw - 140px);
        padding-right: calc(50vw - 140px);
      }
      .featured-square {
        width: 280px;
        height: 380px;
        min-height: 350px;
        opacity: 0.6;
        transform: scale(0.85);
      }
      .featured-square.spotlight {
        opacity: 1;
        transform: scale(1);
      }
      .featured-square-inner {
        padding: 18px 18px 0 18px;
        border-radius: 18px;
      }
      .featured-square .project-media {
        padding: 12px 0 8px 0;
      }
      .featured-square img:not(.project-logo) {
        width: 92%;
        max-width: 280px;
        max-height: 280px;
      }
      .featured-square.spotswitch img:not(.project-logo) {
        width: 94%;
        max-width: 300px;
        max-height: 280px;
      }
      .featured-square .project-overlay {
        width: calc(100% + 36px);
        margin-left: -18px;
        margin-right: -18px;
        margin-top: auto;
        margin-bottom: 0;
        padding: 14px 18px 16px 18px;
        box-sizing: border-box;
        border-radius: 0 0 18px 18px;
      }
      .featured-square .project-title {
        font-size: clamp(22px, 4vw, 32px);
        line-height: 1.2;
      }
      .featured-square .project-descriptor {
        font-size: 0.8rem;
      }
      .featured-square .project-metadata {
        font-size: 0.75rem;
      }
      .featured-square .project-logo {
        width: 50px;
        top: 1rem;
        right: 1rem;
      }
      .view-works-button {
        bottom: auto;
        margin-top: 18px;
      }
    }
    #home h1 {
      font-size: clamp(32px, 4.5vw, 80px);
      line-height: 1.3;
      overflow: visible;
      white-space: nowrap;
      color: white;
      max-width: 100%;
      box-sizing: border-box;
      margin: 0 0 4px 0;
      min-width: 28ch;
    }
    /* FIX: cursor - aligned to end of typed text, matches line-height, subtle 2-3px width */
    #home h1.typing::after {
      content: "";
      display: inline-block;
      width: 3px;
      height: 0.85em;
      margin-left: 0.15em;
      background: rgba(255, 255, 255, 0.9);
      vertical-align: baseline;
      animation: blinkCursor 0.9s steps(1, end) infinite;
    }
    @media (max-width: 1024px) {
      #home h1 {
        white-space: normal;
        word-wrap: break-word;
      }
      /* FIX: cursor - mobile version */
      #home h1.typing::after {
        content: "";
        display: inline-block;
        width: 3px;
        height: 0.85em;
        margin-left: 0.15em;
        background: rgba(255, 255, 255, 0.9);
        vertical-align: baseline;
        animation: blinkCursor 0.9s steps(1, end) infinite;
      }
    }
    /* Responsive design for hero text on medium screens */
    @media (max-width: 1400px) {
      #home h1 {
        font-size: clamp(32px, 4vw, 70px);
      }
    }
    /* Responsive design for hero text on tablets */
    @media (max-width: 1024px) {
      #home h1 {
        font-size: clamp(28px, 4.5vw, 60px);
        white-space: normal;
        word-wrap: break-word;
      }
    }
    /* Responsive design for hero text on mobile devices */
    @media (max-width: 768px) {
      #home h1 {
        font-size: clamp(24px, 5.5vw, 48px);
        white-space: normal;
        word-wrap: break-word;
        position: relative;
        top: auto;
        left: auto;
        transform: none;
      }
      #home {
        /* IMPORTANT: don't wipe out top/bottom padding set above */
        padding-left: 20px;
        padding-right: 20px;
      }
    }
    /* Responsive design for hero text on small mobile devices */
    @media (max-width: 480px) {
      #home h1 {
        font-size: clamp(20px, 6vw, 36px);
      }
      #home {
        /* IMPORTANT: don't wipe out top/bottom padding set above */
        padding-left: 15px;
        padding-right: 15px;
      }
    }
    @keyframes blinkCursor {
      0%, 49% { opacity: 1; }
      50%, 100% { opacity: 0; }
    }
    #about {
      width: 100%;
      max-width: 1400px;
      padding: 40px 60px;
      padding-bottom: 160px;
      box-sizing: border-box;
      margin: 0 auto;
      display: flex;
      justify-content: center;
      overflow: visible;
      position: relative;
      z-index: 2;
    }
    .about-container {
      position: relative;
      z-index: 2;
      display: flex;
      align-items: flex-start;
      gap: 64px;
      text-align: left;
      justify-content: flex-start;
      width: 100%;
      padding-top: 0;
      transform: translateX(-7vw);
      position: relative;
    }
    .about-photo {
      flex: 0 0 auto;
      width: 440px;
      height: 660px;
      background-color: rgba(255, 255, 255, 0.1);
      border-radius: 10px;
      overflow: hidden;
      display: flex;
      align-items: center;
      justify-content: center;
      position: relative;
      align-self: flex-start;
      margin-left: -40px;
      margin-top: 40px;
      z-index: 3;
    }
    .about-photo img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: block;
      visibility: visible;
      opacity: 1;
    }
    .about-text {
      flex: 1;
      padding: 0;
      width: 100%;
      max-width: 760px;
      min-width: 0;
      padding-top: 0;
      display: flex;
      flex-direction: column;
      gap: 32px;
      position: relative;
    }
    .about-text h2 {
      font-size: clamp(64px, 8vw, 120px);
      color: white;
      margin: 0;
      font-weight: 600;
      line-height: 1.2;
      white-space: nowrap;
      flex-shrink: 0;
      min-height: 2.5em;
      height: 2.5em;
    }
    .about-text h2 .hello {
      font-size: 1.3em;
      display: block;
      margin-bottom: -0.15em;
    }
    .about-text h2 .name-text {
      display: inline-block;
      font-size: 0.7em;
      padding-right: 0.08em;
      margin-top: -0.2em;
    }
    .about-text h2 .name-text.typing {
      position: relative;
      padding-right: 0;
    }
    .about-text h2 .name-text.typing::after {
      content: "";
      display: inline-block;
      width: 2px;
      height: 0.9em;
      margin-left: 0.12em;
      background: rgba(255, 255, 255, 0.85);
      vertical-align: baseline;
      animation: blinkCursor 0.9s steps(1, end) infinite;
    }
    /* FIX: about flow - ensure about-body is in normal document flow, no absolute positioning */
    .about-body {
      color: white;
      font-size: clamp(16px, 1.5vw, 24px);
      line-height: 1.6;
      margin-top: 0;
      margin-bottom: 0;
      padding-left: 0;
      max-width: 760px;
      width: 100%;
      text-align: left;
      flex-shrink: 0;
      position: relative;
      top: auto;
      left: auto;
    }
    .about-body p {
      color: white;
      font-size: clamp(16px, 1.5vw, 24px);
      margin: 1.5em 0;
      max-width: 760px;
      width: 100%;
    }
    .about-body p:first-child {
      margin-top: 0;
    }
    .about-body p.subtitle {
      display: flex;
      align-items: center;
      padding-bottom: 0.5em;
      margin-bottom: 1.5em;
      position: relative;
    }
    .about-body p.subtitle::after {
      content: '';
      width: 220px;
      height: 2px;
      background: white;
      margin-left: 1em;
      align-self: center;
      flex-shrink: 0;
    }
    .about-body ul {
      color: white;
      font-size: clamp(16px, 1.5vw, 24px);
      margin: 1.5em 0;
    }
    .about-body li {
      color: white;
      font-size: clamp(16px, 1.5vw, 24px);
      margin: 0.5em 0;
    }
    .about-body strong {
      font-weight: 600;
      font-size: 1.4em;
    }
    .about-body ul.skills-list-about {
      list-style: none;
      padding-left: 0;
      margin: 1.5em 0;
      color: white;
      font-size: clamp(16px, 1.5vw, 24px);
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      column-gap: 2em;
      row-gap: 0.4em;
    }
    .about-body ul.skills-list-about li {
      color: white;
      font-size: clamp(16px, 1.5vw, 24px);
      margin: 0;
      padding-left: 1.2em;
      position: relative;
    }
    .about-body ul.skills-list-about li::before {
      content: '✦';
      position: absolute;
      left: 0;
      color: white;
    }
    /* Responsive design for tablets */
    @media (max-width: 1100px) {
      #about {
        padding: 40px 40px;
        max-width: 100%;
      }
      .about-container {
        gap: 48px;
        transform: translateX(0);
      }
      .about-photo {
        width: 380px;
        height: 580px;
      }
      .about-text {
        max-width: 100%;
      }
      .about-body,
      .about-body p {
        max-width: 100%;
      }
    }
    /* Responsive design for mobile devices */
    @media (max-width: 768px) {
      #about {
        padding: 30px 20px;
        padding-bottom: 160px;
        max-width: 100%;
      }
      .about-container {
        flex-direction: column;
        gap: 40px;
        text-align: center;
      }
      .about-photo {
        width: 70%;
        max-width: 300px;
        height: 50vh;
        min-height: 300px;
      }
      .about-text {
        width: 100%;
        max-width: 100%;
        text-align: left;
      }
      .about-text h2 {
        font-size: clamp(48px, 10vw, 80px);
      }
      .about-body,
      .about-body p {
        max-width: 100%;
      }
      .about-body ul.skills-list-about {
        grid-template-columns: 1fr;
      }
    }
    /* Responsive design for small mobile devices */
    @media (max-width: 480px) {
      #about {
        padding: 20px 15px;
        padding-bottom: 160px;
        max-width: 100%;
      }
      .about-container {
        gap: 30px;
      }
      .about-photo {
        width: 85%;
        height: 45vh;
        min-height: 250px;
      }
      .about-text h2 {
        font-size: clamp(40px, 12vw, 64px);
      }
      .about-body,
      .about-body p {
        max-width: 100%;
      }
      .about-body ul.skills-list-about {
        grid-template-columns: 1fr;
      }
    }
    /* FIX: about flow - reduced excessive margin since about-body is now in normal flow */
    .about-quotes-float {
      margin: 80px auto 0 auto;
      text-align: center;
      max-width: 900px;
      padding: 0;
      pointer-events: none;
    }
    .about-quotes-label {
      font-size: 0.8rem;
      letter-spacing: 0.35em;
      text-transform: uppercase;
      color: rgba(255,255,255,0.55);
      margin-bottom: 18px;
    }
    .about-quotes-line {
      font-family: "Cormorant Garamond", "Playfair Display", cursive;
      font-size: clamp(28px, 3vw, 42px);
      line-height: 1.5;
      color: white;
      text-shadow: 0 12px 30px rgba(0,0,0,0.45);
      min-height: clamp(126px, 9vw, 189px);
    }
    .about-quote-text.typing {
      position: relative;
      padding-right: 0;
    }
    .about-quote-text.typing::after {
      content: "";
      display: inline-block;
      width: 2px;
      height: 0.9em;
      margin-left: 0.12em;
      background: rgba(255, 255, 255, 0.75);
      vertical-align: baseline;
      animation: blinkCursor 0.9s steps(1, end) infinite;
    }
    /* Works CSS Variables */
    :root {
      --works-content-max: 1400px;
    }
    
    #works {
      width: 100%;
      color: white;
      position: relative;
      padding-bottom: 0 !important;
      margin-bottom: 0 !important;
      min-height: auto !important;
    }
    #works.section {
      padding-bottom: 0 !important;
      margin-bottom: 0 !important;
      min-height: auto !important;
    }
    /* Override main-content padding for Works section */
    .main-content #works {
      padding-bottom: 0 !important;
      margin-bottom: 0 !important;
    }
    .works-stage {
      width: 100vw;
      min-height: 100vh;
      padding-top: 84px;
      padding-bottom: 0 !important;
      margin-bottom: 0 !important;
      background: radial-gradient(circle at 50% 30%, rgba(255, 255, 255, 0.06), rgba(0, 0, 0, 0) 55%);
    }
    #works .works-grid-view {
      padding-bottom: 48px !important;
      margin-bottom: 0 !important;
    }
    
    /* Ensure no transforms on Works parents that could break fixed positioning */
    #works {
      transform: none !important;
      filter: none !important;
    }
    
    #works .works-stage,
    #works .works-body {
      transform: none !important;
    }
    .works-topbar {
      width: 100%;
      display: flex;
      justify-content: flex-end;
      padding: 18px 34px;
    }
    .works-header {
      width: 100%;
      padding: 10px 34px 6px 34px;
      position: static;
      background: transparent;
    }
    
    .works-topbar {
      position: sticky;
      top: 18px;
      z-index: 1201;
    }
    .works-header h1,
    .works-header h2 {
      margin: 0;
      font-size: clamp(48px, 5.5vw, 96px);
      letter-spacing: -0.02em;
      color: rgba(255, 255, 255, 0.95);
      font-weight: 700;
      text-align: left;
    }
    
    body.works-active #works .works-header {
      position: static !important;
      top: auto !important;
      left: auto !important;
      right: auto !important;
      z-index: auto !important;
      background: transparent !important;
      box-shadow: none !important;
      border: none !important;
      backdrop-filter: none !important;
      -webkit-backdrop-filter: none !important;
      margin-left: 34px !important;
      margin-right: 34px !important;
      margin-top: 0 !important;
      margin-bottom: 18px !important;
      padding-left: 0 !important;
      padding-right: 0 !important;
      padding-top: 18px !important;
      padding-bottom: 8px !important;
    }
    
    body.works-active #works .works-header * {
      background: transparent !important;
      backdrop-filter: none !important;
      -webkit-backdrop-filter: none !important;
    }
    
    body.works-active #works .works-header h1,
    body.works-active #works .works-header h2 {
      margin: 0 !important;
      font-size: clamp(56px, 6vw, 96px);
      line-height: 0.98;
      letter-spacing: -0.04em;
      font-weight: 800;
      text-align: left !important;
    }
    
    body.works-active #works .works-body {
      padding-top: 0 !important;
    }
    
    body.works-active #works .works-topbar {
      position: static !important;
      top: auto !important;
      z-index: auto !important;
      background: transparent !important;
    }
    
    .works-body {
      position: relative;
      width: 100%;
      display: block;
      padding-right: 48px;
      padding-bottom: 0 !important;
      margin-bottom: 0 !important;
    }
    .works-category-frame {
      width: 100%;
      margin: 0;
      padding: 22px 0;
      position: relative;
    }
    .works-category-frame.anim-out {
      opacity: 0;
      transform: translateY(10px);
      transition: opacity 180ms ease, transform 180ms ease;
    }
    .works-category-frame.anim-in {
      opacity: 1;
      transform: translateY(0px);
      transition: opacity 220ms ease, transform 220ms ease;
    }
    .works-category {
      width: 100%;
      display: flex;
      flex-direction: column;
      gap: 32px;
      align-items: flex-start;
    }
    .works-meta {
      padding-left: 0;
      width: 100%;
      margin-bottom: var(--space-md);
    }
    .works-meta h2 {
      margin: 0 0 var(--space-sm) 0;
      font-size: clamp(2rem, 4vw, 3.5rem);
      line-height: 1.1;
      letter-spacing: -0.02em;
      font-weight: var(--font-semibold);
      color: var(--color-text-primary);
    }
    
    /* Grid view: smaller subtitles for better hierarchy */
    body.works-active #works .works-grid-view .works-meta h2,
    body.works-active #works .works-grid-view .works-category-title,
    body.works-active #works .works-grid-view h2 {
      font-size: clamp(18px, 1.7vw, 24px) !important;
      line-height: 1.18 !important;
      font-weight: 650 !important;
      opacity: 0.92 !important;
      margin-top: 0 !important;
    }
    
    body.works-active #works .works-grid-view .works-meta .works-year,
    body.works-active #works .works-grid-view .works-category-date,
    body.works-active #works .works-grid-view .works-category-subtitle {
      font-size: 13px !important;
      opacity: 0.75 !important;
    }
    .works-meta .works-year {
      margin-top: var(--space-sm);
      color: var(--color-text-secondary);
      letter-spacing: 0.12em;
      text-transform: uppercase;
      font-size: var(--text-sm);
      font-weight: var(--font-medium);
      background: var(--color-surface);
      padding: var(--space-xs) var(--space-sm);
      border-radius: var(--radius-sm);
      display: inline-block;
    }
    .works-meta .works-hint {
      margin-top: var(--space-md);
      color: var(--color-text-muted);
      line-height: 1.6;
      font-size: var(--text-sm);
      max-width: 55ch;
      font-style: italic;
    }
    /* Force left-align for all meta content */
    body.works-active #works .works-meta,
    body.works-active #works .works-meta * {
      text-align: left !important;
    }
    /* Grid view: left-align subtitles/hints */
    body.works-active #works .works-grid-view .works-meta,
    body.works-active #works .works-grid-view .works-meta * {
      text-align: left !important;
    }
    .works-tiles {
      display: grid;
      grid-template-columns: repeat(4, minmax(0, 1fr));
      gap: 18px;
    }
    /* Grid view: horizontal-flowing gallery wall */
    /* Grid view: base grid tiles layout (will be overridden for grid-active) */
    #works .works-grid-view .works-tiles {
      display: flex;
      flex-direction: row;
      flex-wrap: wrap;
      gap: 24px;
      overflow-x: visible;
      overflow-y: visible;
      align-items: flex-start;
      padding-top: 12px;
      padding-bottom: 18px;
      max-width: calc(5 * 320px + 4 * 24px);
    }
    
    #works .works-grid-view .works-tiles::-webkit-scrollbar {
      height: 8px;
    }
    
    body.works-grid-active .works-grid-row .works-tiles,
    body.works-grid-active .works-grid-view .works-tiles {
      display: flex;
      flex-direction: row;
      flex-wrap: wrap;
      gap: 24px;
      overflow-x: visible;
      overflow-y: visible;
      align-items: flex-start;
      padding-top: 12px;
      padding-bottom: 18px;
      max-width: calc(5 * 320px + 4 * 24px);
    }
    
    body.works-grid-active .works-grid-row .works-tiles::-webkit-scrollbar,
    body.works-grid-active .works-grid-view .works-tiles::-webkit-scrollbar {
      height: 8px;
    }
    .work-tile {
      position: relative;
      border-radius: var(--radius-lg);
      background: var(--color-surface);
      border: 1px solid var(--color-border);
      backdrop-filter: blur(16px);
      -webkit-backdrop-filter: blur(16px);
      overflow: hidden;
      transition: 
        transform var(--transition-base),
        background var(--transition-base),
        border-color var(--transition-base),
        box-shadow var(--transition-base);
      cursor: pointer;
      flex: 0 0 auto;
    }
    .work-tile::before {
      content: '';
      position: absolute;
      inset: 0;
      background: linear-gradient(
        180deg,
        transparent 40%,
        rgba(0, 0, 0, 0.6) 100%
      );
      opacity: 0.7;
      transition: opacity var(--transition-base);
      z-index: 1;
    }
    /* GRID tiles */
    #works .works-grid-view .work-tile {
      position: relative !important;
      width: 100%;
      aspect-ratio: 1 / 1;
      min-height: 280px;
      border-radius: var(--radius-lg);
      background: var(--color-surface);
      border: 1px solid var(--color-border);
      backdrop-filter: blur(16px);
      -webkit-backdrop-filter: blur(16px);
      overflow: hidden;
      display: block;
    }
    .work-tile:hover {
      transform: translateY(-8px) scale(1.02);
      background: var(--color-surface-hover);
      border-color: var(--color-border-hover);
      box-shadow: var(--shadow-lg), var(--shadow-glow);
    }
    .work-tile:hover::before {
      opacity: 0.9;
    }
    .work-tile:focus-visible {
      outline: 2px solid rgba(255, 255, 255, 0.7);
      outline-offset: 4px;
    }
    .work-tile:active {
      transform: translateY(-4px) scale(1.01);
    }
    .work-tile .tile-label {
      position: absolute;
      left: var(--space-md);
      right: var(--space-md);
      bottom: var(--space-md);
      font-weight: var(--font-semibold);
      color: var(--color-text-primary);
      line-height: 1.3;
      text-align: left;
      font-size: var(--text-base);
      z-index: 2;
      text-shadow: 0 2px 8px rgba(0, 0, 0, 0.6);
      transition: transform var(--transition-base);
    }
    .work-tile:hover .tile-label {
      transform: translateY(-2px);
    }
    /* Grid view: ensure tile labels display */
    #works .works-grid-view .work-tile .tile-label {
      position: absolute;
      left: var(--space-lg);
      right: var(--space-lg);
      bottom: var(--space-lg);
      text-align: left !important;
      font-weight: var(--font-semibold);
      font-size: var(--text-md);
      color: var(--color-text-primary);
      line-height: 1.3;
    }
    
    /* Tile Thumbnails */
    .tile-thumbnail {
      position: absolute;
      inset: 0;
      width: 100%;
      height: 100%;
      object-fit: cover;
      z-index: 0;
      transition: transform var(--transition-slow), opacity var(--transition-base);
    }
    /* PDF thumbnails (render page 1 via embed) */
    .tile-thumbnail-pdf {
      pointer-events: none;
      border: 0;
      background: rgba(255, 255, 255, 0.92);
    }
    .work-tile.has-thumbnail .tile-label {
      z-index: 3;
      text-shadow: 
        0 2px 4px rgba(0, 0, 0, 0.8),
        0 4px 12px rgba(0, 0, 0, 0.6),
        0 0 20px rgba(0, 0, 0, 0.5);
      font-weight: var(--font-bold);
      letter-spacing: 0.01em;
    }
    /* Stronger gradient overlay for thumbnail tiles */
    .work-tile.has-thumbnail::before {
      background: linear-gradient(
        180deg,
        transparent 0%,
        transparent 30%,
        rgba(0, 0, 0, 0.4) 60%,
        rgba(0, 0, 0, 0.85) 100%
      );
      opacity: 1;
    }
    .work-tile.has-thumbnail:hover::before {
      background: linear-gradient(
        180deg,
        transparent 0%,
        transparent 20%,
        rgba(0, 0, 0, 0.5) 55%,
        rgba(0, 0, 0, 0.92) 100%
      );
    }
    .work-tile.has-thumbnail:hover .tile-thumbnail {
      transform: scale(1.08);
    }
    /* Video thumbnail specific */
    .work-tile video.tile-thumbnail {
      pointer-events: none;
    }
    /* Blurred thumbnail for NDA */
    .work-tile[data-work-key="Game Development UI (DSA)"] .tile-thumbnail {
      filter: blur(20px);
    }
    .works-grid-view {
      width: 100%;
      padding: 8px 0 40px;
      overflow-y: visible;
    }
    .works-grid-row {
      width: 100%;
      padding: var(--space-xl) 0 0 0;
      border-top: 1px solid var(--color-border);
    }
    
    body.works-grid-active .works-grid-row,
    body.works-grid-active .works-grid-divider,
    body.works-grid-active .works-divider,
    body.works-grid-active .grid-divider {
      margin-top: 18px;
    }
    
    body.works-grid-active .work-tile,
    body.works-grid-active .works-tile {
      width: 320px;
      height: 280px;
      flex: 0 0 auto;
    }
    .works-grid-row:first-child {
      border-top: none;
    }
    .works-grid-row .works-category {
      grid-template-columns: 320px 1fr;
    }
    @media (max-width: 1020px) {
      .works-body {
        padding-left: 34px;
      }
      .works-dial {
        display: none;
      }
      .works-category {
        grid-template-columns: 1fr;
      }
      .works-tiles {
        grid-template-columns: repeat(2, minmax(0, 1fr));
      }
      
      /* Allow wrapping on mobile too */
      body.works-grid-active .works-tiles {
        display: flex !important;
        flex-direction: row !important;
        flex-wrap: wrap !important;
        max-width: 100% !important;
      }
    }
    @media (max-width: 520px) {
      .works-tiles {
        grid-template-columns: 1fr;
      }
      
      /* Allow wrapping on mobile too */
      body.works-grid-active .works-tiles {
        display: flex !important;
        flex-direction: row !important;
        flex-wrap: wrap !important;
        max-width: 100% !important;
      }
    }
    /* ========================================
       MODAL SYSTEM - Improved UX
       ======================================== */
    .modal-overlay {
      position: fixed;
      inset: 0;
      z-index: var(--z-modal);
      display: flex;
      align-items: center;
      justify-content: center;
      padding: var(--space-lg);
      background: rgba(0, 0, 0, 0.65);
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
      opacity: 0;
      visibility: hidden;
      transition: opacity var(--transition-base), visibility var(--transition-base);
    }
    .modal-overlay.active {
      opacity: 1;
      visibility: visible;
    }
    .modal-card {
      position: relative;
      max-width: 720px;
      width: 100%;
      max-height: 88vh;
      overflow-y: auto;
      overflow-x: hidden;
      background: rgba(18, 14, 28, 0.92);
      backdrop-filter: blur(40px);
      -webkit-backdrop-filter: blur(40px);
      border: 1px solid var(--color-border);
      border-radius: var(--radius-xl);
      padding: var(--space-2xl);
      box-shadow: var(--shadow-xl), 0 0 80px rgba(0, 0, 0, 0.4);
      transform: scale(0.95) translateY(20px);
      transition: transform var(--transition-bounce), opacity var(--transition-base);
    }
    .modal-overlay.active .modal-card {
      transform: scale(1) translateY(0);
    }
    .modal-close {
      position: absolute;
      top: var(--space-md);
      right: var(--space-md);
      width: 44px;
      height: 44px;
      min-width: 44px;
      min-height: 44px;
      border: 1px solid var(--color-border);
      background: var(--color-surface);
      color: var(--color-text-primary);
      font-size: 24px;
      line-height: 1;
      border-radius: var(--radius-full);
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all var(--transition-fast);
      z-index: 10;
    }
    .modal-close:hover {
      background: var(--color-surface-hover);
      border-color: var(--color-border-hover);
      transform: scale(1.05);
    }
    .modal-close:focus-visible {
      outline: 2px solid rgba(255, 255, 255, 0.7);
      outline-offset: 2px;
    }
    .modal-close:active {
      transform: scale(0.95);
    }
    .modal-header {
      margin-bottom: var(--space-lg);
      padding-right: var(--space-2xl);
    }
    .modal-header h2 {
      font-size: clamp(1.75rem, 4vw, 2.25rem);
      font-weight: var(--font-semibold);
      color: var(--color-text-primary);
      margin: 0 0 var(--space-sm) 0;
      line-height: 1.2;
    }
    .modal-subtitle {
      font-size: var(--text-md);
      color: var(--color-text-secondary);
      margin-top: var(--space-xs);
    }
    .modal-body {
      color: var(--color-text-primary);
    }
    .modal-body p {
      font-size: var(--text-md);
      line-height: 1.75;
      color: var(--color-text-secondary);
      margin: 0 0 var(--space-lg) 0;
    }
    .modal-section-title {
      font-size: var(--text-lg);
      font-weight: var(--font-semibold);
      color: var(--color-text-primary);
      margin: var(--space-xl) 0 var(--space-md) 0;
    }
    .modal-tools {
      list-style: none;
      padding: 0;
      margin: 0 0 var(--space-xl) 0;
      display: flex;
      flex-wrap: wrap;
      gap: var(--space-sm);
    }
    .modal-tools li {
      padding: var(--space-sm) var(--space-md);
      background: var(--color-surface);
      border: 1px solid var(--color-border);
      border-radius: var(--radius-full);
      font-size: var(--text-sm);
      color: var(--color-text-primary);
      transition: all var(--transition-fast);
    }
    .modal-tools li:hover {
      background: var(--color-surface-hover);
      border-color: var(--color-border-hover);
    }
    .modal-actions {
      margin-top: var(--space-xl);
      text-align: center;
    }
    .modal-learn-more {
      display: inline-block;
    }
    
    /* Works Modal Specific Styles */
    .works-modal-card {
      max-width: 760px;
      padding: 0;
      overflow: hidden;
      background: rgba(12, 10, 20, 0.95);
    }
    .works-modal-card .modal-close {
      top: var(--space-md);
      right: var(--space-md);
      background: rgba(0, 0, 0, 0.6);
      border: 1px solid rgba(255, 255, 255, 0.1);
      z-index: 10;
    }
    .works-modal-card .modal-close:hover {
      background: rgba(0, 0, 0, 0.8);
      border-color: rgba(255, 255, 255, 0.2);
    }
    .works-modal-image-container {
      position: relative;
      width: 100%;
      aspect-ratio: 16 / 9;
      background: linear-gradient(135deg, rgba(255,255,255,0.03) 0%, rgba(0,0,0,0.2) 100%);
      overflow: hidden;
    }
    .works-modal-image {
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: block;
      transition: transform var(--transition-slow);
    }
    .works-modal-card:hover .works-modal-image {
      transform: scale(1.02);
    }
    .works-modal-image-placeholder {
      position: absolute;
      inset: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      background: linear-gradient(135deg, rgba(255,255,255,0.04) 0%, rgba(255,255,255,0.01) 100%);
      color: var(--color-text-muted);
      font-size: var(--text-base);
      font-style: italic;
    }
    .works-modal-image-placeholder.hidden {
      display: none;
    }
    
    /* Works Modal Media Carousel */
    .works-modal-media-container {
      position: relative;
      width: 100%;
    }
    .works-modal-carousel {
      position: relative;
      width: 100%;
      background: linear-gradient(135deg, rgba(0,0,0,0.4) 0%, rgba(0,0,0,0.6) 100%);
    }
    .works-carousel-content {
      position: relative;
      width: 100%;
      min-height: 380px;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: var(--space-sm) 0;
    }
    .works-carousel-item {
      width: 100%;
      height: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
      animation: fadeInImage 0.3s ease;
    }
    @keyframes fadeInImage {
      from {
        opacity: 0;
        transform: scale(0.98);
      }
      to {
        opacity: 1;
        transform: scale(1);
      }
    }
    .works-carousel-video {
      padding: var(--space-md);
    }
    .works-carousel-video video {
      width: 100%;
      max-height: 450px;
      border-radius: var(--radius-md);
      background: #000;
      outline: none;
    }
    .works-carousel-video video:focus {
      outline: 2px solid rgba(255, 255, 255, 0.5);
      outline-offset: 2px;
    }
    .works-carousel-pdf {
      flex-direction: column;
      gap: var(--space-sm);
      padding: var(--space-lg) 80px;
      box-sizing: border-box;
    }
    .works-carousel-pdf object,
    .works-carousel-pdf embed {
      width: 100%;
      height: 500px;
      border: none;
      border-radius: var(--radius-md);
      background: #fff;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
    }
    .works-pdf-note {
      margin-top: 10px;
      font-size: 0.9rem;
      color: rgba(255, 255, 255, 0.75);
      text-align: center;
    }
    .works-pdf-download-btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      margin-top: var(--space-sm);
      opacity: 0.7;
      font-size: var(--text-xs);
      padding: var(--space-sm) var(--space-md);
      background: var(--color-surface);
      border: 1px solid var(--color-border);
      border-radius: var(--radius-md);
      color: var(--color-text-primary);
      text-decoration: none;
      font-size: var(--text-sm);
      font-weight: var(--font-medium);
      transition: all var(--transition-fast);
      min-height: 44px;
    }
    .works-pdf-download-btn:hover {
      background: var(--color-surface-hover);
      border-color: var(--color-border-hover);
    }
    .works-carousel-image {
      padding: var(--space-lg) 80px;
      box-sizing: border-box;
      background-color: #ffffff;
      border-radius: var(--radius-md);
    }
    .works-carousel-image img {
      max-width: 100%;
      max-height: 450px;
      width: auto;
      height: auto;
      object-fit: contain;
      border-radius: var(--radius-md);
      cursor: zoom-in;
      transition: transform 0.3s ease, opacity 0.2s ease, box-shadow 0.3s ease;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
    }
    .works-carousel-image img:hover {
      opacity: 0.92;
      transform: scale(1.01);
      box-shadow: 0 8px 30px rgba(0, 0, 0, 0.4);
    }
    /* Blur images for NDA content */
    #works-modal.nda-content .works-carousel-image img,
    #works-modal.nda-content .works-modal-image {
      filter: blur(20px);
    }
    
    /* Image Zoom Overlay */
    .image-zoom-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      background: rgba(0, 0, 0, 0.96);
      z-index: 99999;
      display: flex;
      align-items: center;
      justify-content: center;
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.35s cubic-bezier(0.4, 0, 0.2, 1), visibility 0.35s ease;
      cursor: zoom-out;
      backdrop-filter: blur(8px);
      -webkit-backdrop-filter: blur(8px);
    }
    .image-zoom-overlay.active {
      opacity: 1;
      visibility: visible;
    }
    .image-zoom-overlay img {
      max-width: 92vw;
      max-height: 90vh;
      object-fit: contain;
      border-radius: var(--radius-lg, 12px);
      box-shadow: 0 25px 80px rgba(0, 0, 0, 0.6), 0 10px 30px rgba(0, 0, 0, 0.4);
      transform: scale(0.92);
      opacity: 0;
      transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.35s ease;
    }
    .image-zoom-overlay.active img {
      transform: scale(1);
      opacity: 1;
    }
    .image-zoom-close {
      position: absolute;
      top: 24px;
      right: 32px;
      width: 48px;
      height: 48px;
      font-size: 32px;
      line-height: 1;
      color: white;
      background: rgba(255, 255, 255, 0.15);
      border: 1px solid rgba(255, 255, 255, 0.3);
      border-radius: 50%;
      cursor: pointer;
      opacity: 1;
      transition: all 0.25s ease;
      z-index: 100000;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .image-zoom-close:hover {
      opacity: 1;
      background: rgba(255, 255, 255, 0.15);
      transform: scale(1.05);
    }
    .image-zoom-hint {
      position: absolute;
      bottom: 28px;
      left: 50%;
      transform: translateX(-50%);
      color: rgba(255, 255, 255, 0.5);
      font-size: var(--text-sm);
      pointer-events: none;
      letter-spacing: 0.5px;
      opacity: 0;
      transition: opacity 0.5s ease 0.3s;
    }
    .image-zoom-overlay.active .image-zoom-hint {
      opacity: 1;
    }
    .works-carousel-arrow {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      width: 52px;
      height: 52px;
      min-width: 48px;
      min-height: 48px;
      border-radius: var(--radius-full);
      border: 2px solid rgba(255, 255, 255, 0.25);
      background: rgba(0, 0, 0, 0.65);
      color: white;
      font-size: 28px;
      font-weight: 300;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.25s ease;
      z-index: 10;
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
    }
    .works-carousel-arrow:hover {
      background: rgba(0, 0, 0, 0.85);
      border-color: rgba(255, 255, 255, 0.5);
      transform: translateY(-50%) scale(1.08);
      box-shadow: 0 6px 20px rgba(0, 0, 0, 0.4);
    }
    .works-carousel-arrow:active {
      transform: translateY(-50%) scale(0.98);
    }
    .works-carousel-arrow:focus-visible {
      outline: 2px solid rgba(255, 255, 255, 0.7);
      outline-offset: 2px;
    }
    .works-carousel-arrow-left {
      left: 16px;
    }
    .works-carousel-arrow-right {
      right: 16px;
    }
    .works-carousel-indicators {
      display: flex;
      justify-content: center;
      gap: 10px;
      padding: var(--space-md) 0 var(--space-sm);
    }
    .works-carousel-dot {
      width: 10px;
      height: 10px;
      border-radius: var(--radius-full);
      background: rgba(255, 255, 255, 0.25);
      border: 1px solid rgba(255, 255, 255, 0.15);
      cursor: pointer;
      transition: all 0.25s ease;
      padding: 0;
    }
    .works-carousel-dot:hover {
      background: rgba(255, 255, 255, 0.45);
      transform: scale(1.1);
    }
    .works-carousel-dot.active {
      background: rgba(255, 255, 255, 0.9);
      transform: scale(1.2);
    }
    .works-carousel-label {
      text-align: center;
      padding: var(--space-xs) var(--space-md) var(--space-lg);
      font-size: var(--text-sm);
      color: var(--color-text-secondary);
      font-style: italic;
      letter-spacing: 0.3px;
      opacity: 0.85;
    }
    
    @media (max-width: 768px) {
      .works-carousel-content {
        min-height: 220px;
      }
      .works-carousel-image {
        padding: var(--space-md) 50px;
      }
      .works-carousel-image img {
        max-height: 320px;
      }
      .works-carousel-video video {
        max-height: 280px;
      }
      .works-carousel-pdf {
        padding: var(--space-md) 50px;
      }
      .works-carousel-pdf object,
      .works-carousel-pdf embed {
        height: 350px;
      }
      .works-carousel-arrow {
        width: 44px;
        height: 44px;
        font-size: 22px;
      }
      .works-carousel-arrow-left {
        left: 8px;
      }
      .works-carousel-arrow-right {
        right: 8px;
      }
    }
    .works-modal-card .modal-header {
      padding: var(--space-xl) var(--space-xl) var(--space-md);
    }
    .works-modal-card .modal-body {
      padding: 0 var(--space-xl) var(--space-xl);
    }
    .works-modal-meta {
      display: flex;
      align-items: center;
      flex-wrap: wrap;
      gap: var(--space-sm);
      margin-top: var(--space-sm);
      font-size: var(--text-sm);
      color: var(--color-text-secondary);
    }
    .works-modal-date {
      font-weight: var(--font-medium);
      color: var(--color-text-primary);
      background: var(--color-surface);
      padding: var(--space-xs) var(--space-sm);
      border-radius: var(--radius-sm);
    }
    .works-modal-divider {
      opacity: 0.4;
    }
    .works-modal-medium {
      font-style: italic;
      color: var(--color-text-muted);
    }
    .works-modal-description {
      font-size: var(--text-md);
      line-height: 1.85;
      color: var(--color-text-secondary);
      margin: 0;
    }
    .works-modal-links {
      margin-top: var(--space-lg);
      display: flex;
      flex-wrap: wrap;
      gap: var(--space-sm);
    }
    .works-modal-link {
      display: inline-flex;
      align-items: center;
      gap: var(--space-sm);
      padding: var(--space-sm) var(--space-md);
      background: var(--color-surface);
      border: 1px solid var(--color-border);
      border-radius: var(--radius-md);
      color: var(--color-text-primary);
      text-decoration: none;
      font-size: var(--text-sm);
      font-weight: var(--font-medium);
      transition: all var(--transition-fast);
      min-height: 44px;
    }
    .works-modal-link:hover {
      background: var(--color-surface-hover);
      border-color: var(--color-border-hover);
      transform: translateY(-2px);
      box-shadow: var(--shadow-sm);
    }
    .works-modal-link:focus-visible {
      outline: 2px solid rgba(255, 255, 255, 0.7);
      outline-offset: 2px;
    }
    .works-modal-link::before {
      content: '📄';
      font-size: 1.1em;
    }
    
    /* Modal Responsive */
    @media (max-width: 768px) {
      .modal-overlay {
        padding: var(--space-md);
      }
      .modal-card {
        padding: var(--space-lg);
        max-height: 92vh;
        border-radius: var(--radius-lg);
      }
      .modal-close {
        top: var(--space-sm);
        right: var(--space-sm);
        width: 40px;
        height: 40px;
        min-width: 40px;
        min-height: 40px;
      }
      .modal-header {
        padding-right: var(--space-xl);
      }
      .modal-header h2 {
        font-size: var(--text-xl);
      }
      .modal-body p {
        font-size: var(--text-base);
      }
      .works-modal-card .modal-header {
        padding: var(--space-lg) var(--space-lg) var(--space-sm);
      }
      .works-modal-card .modal-body {
        padding: 0 var(--space-lg) var(--space-lg);
      }
      .works-modal-meta {
        flex-direction: column;
        align-items: flex-start;
        gap: var(--space-xs);
      }
      .works-modal-divider {
        display: none;
      }
    }
    
    
    @media (max-width: 1020px) {
      #works .works-body {
        padding-left: 24px;
        padding-right: 24px;
      }
      .works-dial {
        display: none;
      }
      #works .works-category-frame {
        max-width: none;
        margin: 0;
      }
    }
    /* Grid view responsive - handled automatically by auto-fit */
    
    /* ===== WORKS FIX: remove massive bottom space (scoped) ===== */
    body.works-active .main-content {
      padding-bottom: 0 !important;
      margin-bottom: 0 !important;
      min-height: auto !important;
    }
    
    body.works-active #works.section {
      padding-bottom: 0 !important;
      margin-bottom: 0 !important;
      min-height: 0 !important;
    }
    
    body.works-active #works .works-stage {
      padding-bottom: 0 !important;
      margin-bottom: 0 !important;
      min-height: 0 !important;
    }
    
    /* Tighten footer spacing when Works is active */
    body.works-active footer {
      margin-top: 24px !important;
    }
    
    /* Grid mode: natural height, no forced empty space */
    body.works-active.works-grid-active #works .works-stage {
      height: auto;
      overflow: visible;
    }
    
    body.works-active.works-grid-active #works .works-grid-view {
      padding-bottom: 90px !important;
      max-width: none !important;
      width: 100% !important;
      overflow: visible !important;
    }
    
    body.works-active.works-grid-active #works .works-body {
      overflow: visible !important;
    }
    
    body.works-active.works-grid-active #works .works-grid-row:last-child {
      padding-bottom: 90px !important;
    }
    
    /* Grid-only: remove width constraints to use full screen width */
    body.works-active.works-grid-active #works .works-body {
      padding-left: 34px !important;
      padding-right: 34px !important;
    }
    
    body.works-active.works-grid-active #works .works-category-frame {
      max-width: none !important;
      margin: 0 !important;
      width: 100% !important;
    }
    
    /* Grid-only: ensure tiles fill width with auto-fit columns */
    body.works-active.works-grid-active #works .works-body {
      padding-left: 34px !important;
      padding-right: 34px !important;
    }
    
    body.works-active.works-grid-active #works .works-grid-view .works-tiles {
      display: flex !important;
      flex-wrap: wrap !important;
      gap: 24px !important;
      overflow-x: visible !important;
      overflow-y: visible !important;
      align-items: stretch;
      padding-top: 12px !important;
      max-width: calc(5 * 320px + 4 * 24px) !important;
    }
    
    /* Grid-only: ensure tiles stay square cards */
    body.works-active.works-grid-active #works .works-grid-view .work-tile {
      flex: 0 0 300px !important;
      aspect-ratio: 1 / 1 !important;
      min-height: 280px !important;
      position: relative !important;
      scroll-snap-align: start !important;
    }
    
    /* Ensure grid container is not width-clamped in grid view */
    body.works-active.works-grid-active #works .works-category-frame {
      max-width: none !important;
      width: 100% !important;
      margin: 0 !important;
    }
    
    /* Ensure nothing clips tile glows */
    #works .works-category-frame,
    #works .works-grid-view {
      overflow: visible;
    }
    
    /* ===== CONTACT PAGE STYLES ===== */
    #contact.section {
      padding: 60px 34px 40px;
      max-width: 1400px;
      margin: 0 auto;
      min-height: auto;
    }
    
    .contact-stage {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 60px;
      align-items: start;
    }
    
    .contact-left {
      display: flex;
      flex-direction: column;
      gap: 32px;
    }
    
    .contact-title {
      font-size: clamp(48px, 5.5vw, 72px);
      font-weight: 700;
      color: rgba(255, 255, 255, 0.95);
      margin: 0;
      line-height: 1.1;
      letter-spacing: -0.02em;
    }
    
    .contact-subtitle {
      font-size: 1.15rem;
      color: rgba(255, 255, 255, 0.75);
      line-height: 1.6;
      margin: 0;
    }
    
    .contact-availability {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
    }
    
    .availability-pill {
      display: inline-block;
      padding: 8px 18px;
      background: rgba(255, 255, 255, 0.08);
      border: 1px solid rgba(255, 255, 255, 0.16);
      border-radius: 50px;
      font-size: 0.9rem;
      color: rgba(255, 255, 255, 0.85);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
    }
    
    .contact-cards {
      display: flex;
      flex-direction: column;
      gap: 16px;
    }
    
    .contact-card {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 20px 24px;
      background: rgba(255, 255, 255, 0.08);
      border: 1px solid rgba(255, 255, 255, 0.16);
      border-radius: 20px;
      backdrop-filter: blur(14px);
      -webkit-backdrop-filter: blur(14px);
      transition: all 0.3s ease;
      cursor: pointer;
      text-decoration: none;
      color: inherit;
    }
    
    .contact-card:hover {
      background: rgba(255, 255, 255, 0.12);
      border-color: rgba(255, 255, 255, 0.24);
      transform: translateY(-2px);
      box-shadow: 0 4px 16px rgba(0, 0, 0, 0.2);
    }
    
    .contact-card-disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }
    
    .contact-card-disabled:hover {
      transform: none;
      background: rgba(255, 255, 255, 0.08);
    }
    
    .contact-card-link {
      color: inherit;
    }
    
    .contact-card-content {
      display: flex;
      align-items: center;
      gap: 16px;
      flex: 1;
    }
    
    .contact-card-icon {
      font-size: 1.5rem;
      width: 40px;
      height: 40px;
      display: flex;
      align-items: center;
      justify-content: center;
      background: rgba(255, 255, 255, 0.06);
      border-radius: 12px;
    }
    
    .contact-card-info {
      flex: 1;
    }
    
    .contact-card-label {
      font-size: 0.85rem;
      color: rgba(255, 255, 255, 0.6);
      margin-bottom: 4px;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }
    
    .contact-card-value {
      font-size: 1rem;
      color: rgba(255, 255, 255, 0.9);
      font-weight: 500;
    }
    
    .contact-card-button {
      padding: 8px 20px;
      background: rgba(255, 255, 255, 0.1);
      border: 1px solid rgba(255, 255, 255, 0.2);
      border-radius: 6px;
      color: white;
      font-size: 0.9rem;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.2s ease;
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
    }
    
    .contact-card-button:hover {
      background: rgba(255, 255, 255, 0.2);
      border-color: rgba(255, 255, 255, 0.3);
    }
    
    .contact-card-arrow {
      font-size: 1.2rem;
      color: rgba(255, 255, 255, 0.7);
      margin-left: 12px;
    }
    
    .contact-right {
      position: sticky;
      top: 80px;
    }
    
    .contact-form-panel {
      background: rgba(255, 255, 255, 0.08);
      border: 1px solid rgba(255, 255, 255, 0.16);
      border-radius: 24px;
      padding: 36px;
      backdrop-filter: blur(14px);
      -webkit-backdrop-filter: blur(14px);
      box-shadow: 
        inset 0 1px 0 rgba(255, 255, 255, 0.15),
        0 4px 16px rgba(0, 0, 0, 0.3);
    }
    
    .contact-form-title {
      font-size: 1.75rem;
      font-weight: 600;
      color: rgba(255, 255, 255, 0.95);
      margin: 0 0 28px 0;
    }
    
    .form-group {
      margin-bottom: 24px;
    }
    
    .form-group label {
      display: block;
      font-size: 0.9rem;
      color: rgba(255, 255, 255, 0.75);
      margin-bottom: 8px;
      font-weight: 500;
    }
    
    .form-group input,
    .form-group select,
    .form-group textarea {
      width: 100%;
      padding: 14px 18px;
      background: rgba(255, 255, 255, 0.06);
      border: 1px solid rgba(255, 255, 255, 0.16);
      border-radius: 12px;
      color: white;
      font-size: 1rem;
      font-family: 'Poppins', sans-serif;
      transition: all 0.2s ease;
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
    }
    
    .form-group input::placeholder,
    .form-group textarea::placeholder {
      color: rgba(255, 255, 255, 0.4);
    }
    
    .form-group input:focus,
    .form-group select:focus,
    .form-group textarea:focus {
      outline: none;
      border-color: rgba(255, 255, 255, 0.3);
      background: rgba(255, 255, 255, 0.1);
      box-shadow: 0 0 0 3px rgba(255, 255, 255, 0.1);
    }
    
    .form-group select {
      cursor: pointer;
      appearance: none;
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%23ffffff' d='M6 9L1 4h10z'/%3E%3C/svg%3E");
      background-repeat: no-repeat;
      background-position: right 18px center;
      padding-right: 40px;
    }
    
    .form-group textarea {
      resize: vertical;
      min-height: 120px;
    }
    
    .form-error {
      display: block;
      color: rgba(255, 150, 150, 0.9);
      font-size: 0.85rem;
      margin-top: 6px;
      min-height: 20px;
    }
    
    .contact-submit-button {
      width: 100%;
      padding: 16px 32px;
      background: white;
      color: #000;
      border: none;
      border-radius: 6px;
      font-size: 1rem;
      font-weight: 600;
      font-family: 'Poppins', sans-serif;
      cursor: pointer;
      transition: all 0.3s ease;
      margin-top: 8px;
    }
    
    .contact-submit-button:hover {
      background: rgba(255, 255, 255, 0.9);
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(255, 255, 255, 0.3);
    }
    
    .contact-submit-button:active {
      transform: translateY(0);
    }
    
    .contact-success {
      margin-top: 20px;
      padding: 16px;
      background: rgba(100, 200, 100, 0.15);
      border: 1px solid rgba(100, 200, 100, 0.3);
      border-radius: 12px;
      color: rgba(150, 255, 150, 0.9);
      font-size: 0.95rem;
      text-align: center;
    }
    
    /* Skip Link for Accessibility */
    .skip-link {
      position: absolute;
      top: -100px;
      left: 0;
      background: rgba(255, 255, 255, 0.95);
      color: #000;
      padding: 12px 24px;
      text-decoration: none;
      font-weight: 600;
      z-index: 10001;
      border-radius: 0 0 8px 0;
      transition: top 0.2s ease;
    }
    .skip-link:focus {
      top: 0;
      outline: 3px solid rgba(255, 255, 255, 0.8);
      outline-offset: 2px;
    }
    
    .toast {
      position: fixed;
      bottom: 32px;
      right: 32px;
      padding: 16px 24px;
      background: rgba(255, 255, 255, 0.15);
      border: 1px solid rgba(255, 255, 255, 0.25);
      border-radius: 12px;
      color: white;
      font-size: 0.95rem;
      backdrop-filter: blur(14px);
      -webkit-backdrop-filter: blur(14px);
      box-shadow: 0 4px 16px rgba(0, 0, 0, 0.3);
      z-index: 10000;
      opacity: 0;
      transform: translateY(20px);
      transition: all 0.3s ease;
      pointer-events: none;
    }
    
    .toast.show {
      opacity: 1;
      transform: translateY(0);
      pointer-events: auto;
    }
    
    @media (max-width: 1024px) {
      .contact-stage {
        grid-template-columns: 1fr;
        gap: 40px;
      }
      
      .contact-right {
        position: static;
      }
    }
    
    @media (max-width: 768px) {
      #contact.section {
        padding: 40px 24px 32px;
      }
      
      .contact-form-panel {
        padding: 28px;
      }
      
      .contact-title {
        font-size: clamp(36px, 8vw, 56px);
      }
      
      .toast {
        bottom: 24px;
        right: 24px;
        left: 24px;
      }
    }
    
    /* (Removed) Temporary FORCE Home overrides / debug colors */
  </style>
  <script>
    // Debug flag (keep disabled in production)
    const DEBUG = false;
    const debugLog = (...args) => { if (DEBUG) console.log(...args); };

    // Asset path helpers.
    // Use relative paths so preview works when:
    // - double-clicking the HTML (file://)
    // - hosting on GitHub Pages under /<repo>/
    const ASSETS = {
      // Preferred production structure (recommended):
      works: './assets/works/',
      video: './assets/video/',
      pdf: './assets/pdf/',
      logo: './assets/logo/',
      profile: './assets/profile/'
    };

    function normalizeAssetPath(input) {
      if (!input || typeof input !== 'string') return input;
      let p = input.trim();

      // Already absolute web URLs or data URIs
      if (/^(https?:)?\/\//i.test(p) || p.startsWith('data:')) return p;

      // Convert Windows/file URLs to web asset paths by filename
      p = p.replace(/^file:\/\/\/[a-zA-Z]:\//, '/');
      p = p.replace(/^[a-zA-Z]:[\\/]/, '/'); // "C:\..."
      p = p.replace(/\\/g, '/');

      // Strip leading ../ which breaks on hosts
      while (p.startsWith('../')) p = p.slice(3);

      // Normalize known legacy folders (including typo)
      p = p.replace(/^portfolio\s+iamges\//i, '');
      p = p.replace(/^portfolio\s+images\//i, '');
      p = p.replace(/^past\s+portfolio\s*-\s*alvin\s+zhou\//i, 'past-portfolio/');
      p = p.replace(/^ortfolio\//i, 'portfolio/');

      // Already normalized project-relative assets
      if (p.startsWith('./assets/') || p.startsWith('./portfolio images/')) return p;

      // Root-relative assets -> convert to relative so it works under subpaths
      if (p.startsWith('/assets/')) return '.' + p;

      // Route by extension
      const lower = p.toLowerCase();
      if (lower.endsWith('.pdf')) return ASSETS.pdf + p.replace(/^pdf\//i, '');
      if (lower.endsWith('.mp4') || lower.endsWith('.mov') || lower.endsWith('.webm')) return ASSETS.video + p.replace(/^video\//i, '');

      // Default: works images/gifs
      return ASSETS.works + p.replace(/^works\//i, '');
    }

    function addGlobalMediaFallbacks() {
      const addFallback = (el, label) => {
        const parent = el.parentElement;
        if (!parent) return;
        const fb = document.createElement('div');
        fb.className = 'media-fallback';
        fb.setAttribute('role', 'img');
        fb.setAttribute('aria-label', label || 'Media unavailable');
        fb.innerHTML = `<span>${label || 'Media unavailable'}</span>`;
        el.remove();
        parent.appendChild(fb);
      };

      // IMPORTANT: don't attach to placeholder <img src=""> used by modals/carousels,
      // otherwise the browser can treat "" as the current page URL and "error" immediately.
      document.querySelectorAll('img').forEach(img => {
        const src = (img.getAttribute('src') || '').trim();
        if (!src) return;
        img.addEventListener('error', () => addFallback(img, img.alt || 'Image unavailable'), { once: true });
      });
      document.querySelectorAll('video').forEach(v => {
        const src = (v.getAttribute('src') || '').trim();
        // Some videos use <source>; skip if empty.
        if (!src && !v.querySelector('source[src]')) return;
        v.addEventListener('error', () => addFallback(v, v.getAttribute('aria-label') || 'Video unavailable'), { once: true });
      });
    }

    function safeSetMediaSrc(el, src, label) {
      const resolved = normalizeAssetPath(src);
      if (!el) return;
      el.dataset.src = resolved || '';
      try {
        if (el.tagName === 'IMG') {
          el.loading = el.loading || 'lazy';
          el.decoding = el.decoding || 'async';
          el.src = resolved;
        } else if (el.tagName === 'VIDEO') {
          el.src = resolved;
        } else if (el.tagName === 'EMBED' || el.tagName === 'IFRAME') {
          el.src = resolved;
        }
      } catch (_) {}

      // Fallback UI if asset fails to load
      const onFail = () => {
        const parent = el.parentElement;
        if (!parent) return;
        const fb = document.createElement('div');
        fb.className = 'media-fallback';
        fb.setAttribute('role', 'img');
        fb.setAttribute('aria-label', label || 'Media unavailable');
        fb.innerHTML = `<span>${label || 'Media unavailable'}</span>`;
        el.remove();
        parent.appendChild(fb);
      };

      if (el.tagName === 'IMG') el.addEventListener('error', onFail, { once: true });
      if (el.tagName === 'VIDEO') el.addEventListener('error', onFail, { once: true });
    }
    // Configuration object for constants
    const CONFIG = {
      colors: {
        bgPrimary: 'rgba(8, 5, 14, 0.98)',
        textPrimary: 'rgba(255, 255, 255, 0.95)'
      },
      selectors: {
        sections: '.section',
        navLinks: '.nav-options a',
        modals: '.modal-overlay'
      },
      timings: {
        transition: 250,
        scrollDelay: 100
      }
    };
    
    // Works modal scroll restore flags (single source of truth)
    let __restoreScrollY = null;
    let __suppressNextSectionScroll = false;
    
    // Modal focus trap and accessibility utilities
    let modalScrollPosition = 0;
    let lastFocusedElement = null;
    let modalFocusableElements = [];
    
    function trapFocus(modal) {
      if (!modal) return;
      
      // Get all focusable elements within modal
      const focusableSelectors = 'button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])';
      modalFocusableElements = Array.from(modal.querySelectorAll(focusableSelectors))
        .filter(el => !el.disabled && el.offsetParent !== null);
      
      if (modalFocusableElements.length === 0) return;
      
      // Focus first element
      modalFocusableElements[0].focus();
      
      // Handle Tab key
      modal.addEventListener('keydown', function handleTab(e) {
        if (e.key !== 'Tab') return;
        
        const firstElement = modalFocusableElements[0];
        const lastElement = modalFocusableElements[modalFocusableElements.length - 1];
        
        if (e.shiftKey) {
          // Shift + Tab
          if (document.activeElement === firstElement) {
            e.preventDefault();
            lastElement.focus();
          }
        } else {
          // Tab
          if (document.activeElement === lastElement) {
            e.preventDefault();
            firstElement.focus();
          }
        }
      });
    }
    
    function openModalWithAccessibility(modal, triggerElement) {
      if (!modal) return;
      
      // Store scroll position when opening
      modalScrollPosition = window.scrollY;
      // Store per-modal too (avoids any cross-modal interference)
      modal.dataset.scrollY = String(modalScrollPosition);
      lastFocusedElement = triggerElement || document.activeElement;
      
      // Show modal
      modal.classList.add('active');
      modal.setAttribute('aria-hidden', 'false');
      
      // Prevent body scroll while preserving scroll position
      document.body.style.position = 'fixed';
      document.body.style.top = `-${modalScrollPosition}px`;
      document.body.style.width = '100%';
      document.body.style.overflow = 'hidden';
      
      // Trap focus
      setTimeout(() => trapFocus(modal), 100);
    }
    
    function closeModalWithAccessibility(modal) {
      if (!modal) return;
      
      // Hide modal
      modal.classList.remove('active');
      modal.setAttribute('aria-hidden', 'true');

      // Restore scroll position EXACTLY after unlock (Works rebound fix)
      // Use per-modal stored scrollY first, fall back to Works global.
      const y = Number(modal.dataset.scrollY || __restoreScrollY || window.scrollY || 0);
      const prevScrollBehavior = document.documentElement.style.scrollBehavior;
      document.documentElement.style.scrollBehavior = 'auto';

      // Restore body scroll
      document.body.style.position = '';
      document.body.style.top = '';
      document.body.style.width = '';
      document.body.style.overflow = '';

      const restore = () => window.scrollTo(0, y);
      restore();
      requestAnimationFrame(restore);
      setTimeout(restore, 0);
      setTimeout(restore, 50);
      
      // Restore focus without scrolling the page
      if (lastFocusedElement && typeof lastFocusedElement.focus === 'function') {
        try {
          lastFocusedElement.focus({ preventScroll: true });
        } catch (_) {
          // If preventScroll isn't supported, skip focus restore to avoid scroll-jumps.
        }
      }
      
      // Final enforcement after focus/paint
      requestAnimationFrame(restore);
      setTimeout(restore, 100);

      // Works flags cleanup (safe even for non-Works modals)
      __restoreScrollY = null;
      setTimeout(() => { __suppressNextSectionScroll = false; }, 100);

      // Restore scroll-behavior after enforcement window
      setTimeout(() => { document.documentElement.style.scrollBehavior = prevScrollBehavior; }, 140);
      
      // Clear references
      modalFocusableElements = [];
      lastFocusedElement = null;
    }
    
    // Make showSection global so it can be called from anywhere.
    // Navigation rules:
    // - Default: preserve current scroll.
    // - Only scroll to top when explicitly requested by nav (options.scroll === "top")
    window.showSection = function showSection(id, options = { scroll: "preserve" }) {
      const prev = window.__activeSection;
      const isSame = prev === id;
      window.__activeSection = id;

      // Hide all sections, show target
      document.querySelectorAll('.section').forEach(sec => {
        sec.style.display = 'none';
      });

      const target = document.getElementById(id);
      if (!target) return;
      target.style.display = 'block';

      // Active state in top nav
      document.querySelectorAll('.nav-options a').forEach(link => link.classList.remove('active'));
      const activeLink = document.querySelector('.nav-options a[href="#' + id + '"]');
      if (activeLink) activeLink.classList.add('active');

      // Works-only body class management + grid render hook
      if (id === 'works') {
        document.body.classList.add('works-active');
        document.body.classList.add('works-grid-active');
        document.body.style.overflow = '';
        // Render grid view when entering Works.
        // On refresh deep-linked to #works, showSection can run before renderGridView is defined;
        // retry shortly so tiles always appear.
        const tryRenderWorks = (attempt = 0) => {
          if (typeof window.renderGridView === 'function') {
            window.renderGridView();
            return;
          }
          if (attempt < 10) setTimeout(() => tryRenderWorks(attempt + 1), 50);
        };
        tryRenderWorks(0);
      } else {
        document.body.classList.remove('works-active');
        document.body.classList.remove('works-grid-active');
        document.body.style.overflow = '';
      }

      // About typing + quote rotation hooks (no layout/scroll hacks)
      if (id === 'about') {
        if (typeof window.typeAboutText === 'function') window.typeAboutText();
        if (typeof window.startQuoteRotation === 'function') window.startQuoteRotation();
      } else {
        if (typeof window.stopQuoteRotation === 'function') window.stopQuoteRotation();
      }

      // Keep hash in sync without forcing scroll
      history.replaceState(null, '', '#' + id);

      // Scroll to top ONLY when navigating to a different section via nav
      if (!isSame && options && options.scroll === "top") {
        if (!__suppressNextSectionScroll) {
          window.scrollTo({ top: 0, behavior: 'smooth' });
        }
      }
    };

    document.addEventListener('DOMContentLoaded', function () {
      // Show graceful placeholders if assets are missing locally
      addGlobalMediaFallbacks();

      // Resume PDF URL constant
      const RESUME_URL = "./assets/pdf/resume/resumealvin.pdf";
      
      // Update all Resume links to use RESUME_URL
      document.querySelectorAll('a').forEach(link => {
        const linkText = link.textContent.trim();
        const labelText = link.querySelector('.contact-card-label')?.textContent.trim();
        if (linkText === 'Resume' || labelText === 'Resume') {
          link.href = RESUME_URL;
          link.target = '_blank';
          link.rel = 'noopener noreferrer';
        }
      });
      
      // No file:// links should exist in production; RESUME_URL is web-safe.
      
      // Centralized click handler for ALL hash links (nav, home buttons, footer, etc.)
      document.addEventListener('click', (e) => {
        const a = e.target.closest('a');
        if (!a) return;

        const href = a.getAttribute('href');
        if (!href || !href.startsWith('#')) return;

        const id = href.slice(1);
        if (!document.getElementById(id)) return;

        e.preventDefault();
        // Only the top navigation should force scroll-to-top on section change.
        const isTopNavLink = !!a.closest('nav');
        window.showSection(id, { scroll: isTopNavLink ? "top" : "preserve" });
      });

      // On load, show correct section
      let hash = location.hash.replace('#','') || 'home';
      if (!document.getElementById(hash)) hash = 'home';
      window.showSection(hash);
      
      // Handle back/forward button navigation
      window.addEventListener('hashchange', () => {
        const id = location.hash.replace('#','') || 'home';
        if (document.getElementById(id)) window.showSection(id, { scroll: "preserve" });
      });
      // Do NOT force scroll-to-top on refresh; keep browser's natural restore behavior.

      // Loading animation
      const loadingScreen = document.querySelector('.loading-screen');
      const loadingBarContainer = document.querySelector('.loading-bar-container');
      const navLogo = document.querySelector('.logo');
      
      // Reset loading screen to ensure it shows on every page load
      if (loadingScreen) {
        loadingScreen.style.display = 'flex';
        loadingScreen.classList.remove('hiding');
        loadingScreen.style.opacity = '1';
      }
      if (loadingBarContainer) {
        loadingBarContainer.style.opacity = '1';
        loadingBarContainer.style.visibility = 'visible';
      }
      
      // Hide loading bar instantly when it finishes (at 1.5s, before black screen fades)
      setTimeout(() => {
        if (loadingBarContainer) {
          loadingBarContainer.style.opacity = '0';
          loadingBarContainer.style.visibility = 'hidden';
        }
      }, 1500);
      
      // After 1.5 seconds, start the exit animation
      setTimeout(() => {
        loadingScreen.classList.add('hiding');
        // Show nav logo when loading logo reaches top-left position
        setTimeout(() => {
          navLogo.classList.add('visible');
        }, 1500);
        // Remove loading screen after animations complete
        setTimeout(() => {
          loadingScreen.style.display = 'none';
        }, 1500);
      }, 1500);

      // Typing animation for hero text
      const heroText = document.getElementById('hero-text');
      const baseText = 'Transforming ';
      const texts = [
        'ideas into visual masterpieces',
        'brands into bold visual identities',
        'interfaces into moments of connection',
        'ideas into designs that move people'
      ];
      let currentTextIndex = 0;
      let charIndex = 0;
      let isDeleting = false;
      
      function typeText() {
        const currentText = baseText + texts[currentTextIndex];
        
        if (!isDeleting && charIndex < currentText.length) {
          // Typing forward
          heroText.textContent = currentText.substring(0, charIndex + 1);
          heroText.classList.add('typing');
          charIndex++;
          setTimeout(typeText, 50);
        } else if (!isDeleting && charIndex >= currentText.length) {
          // Finished typing, wait 2 seconds then start deleting
          heroText.classList.remove('typing');
          setTimeout(() => {
            isDeleting = true;
            typeText();
          }, 2000);
        } else if (isDeleting && charIndex > baseText.length) {
          // Deleting backward (but keep "Transforming ")
          heroText.textContent = currentText.substring(0, charIndex - 1);
          heroText.classList.add('typing');
          charIndex--;
          setTimeout(typeText, 30); // Faster deletion
        } else if (isDeleting && charIndex <= baseText.length) {
          // Finished deleting, move to next text
          isDeleting = false;
          currentTextIndex = (currentTextIndex + 1) % texts.length;
          charIndex = baseText.length;
          heroText.textContent = baseText;
          setTimeout(typeText, 300); // Brief pause before typing next
        }
      }
      
      // Start typing animation after nav items appear (around 4 seconds)
      setTimeout(() => {
        charIndex = 0; // Start from empty
        heroText.textContent = '';
        typeText();
      }, 4000);

      // Typing animation for about text
      let aboutTypingTimeout = null;
      let bodyPositionSet = false;
      window.typeAboutText = function typeAboutText() {
        const aboutTextElement = document.getElementById('about-text');
        const helloSpan = aboutTextElement?.querySelector('.hello');
        const nameSpan = aboutTextElement?.querySelector('.name-text');
        const aboutBody = document.querySelector('.about-body');
        
        if (!aboutTextElement || !helloSpan || !nameSpan) return;
        
        // FIX: about flow - removed absolute positioning hack, about-body stays in normal flow
        // (bodyPositionSet logic removed - no longer needed)
        
        // Clear any existing timeout
        if (aboutTypingTimeout) {
          clearTimeout(aboutTypingTimeout);
        }
        
        const helloText = 'Hello!';
        const nameText = ' My name is Alvin Zhou';
        let helloIndex = 0;
        let nameIndex = 0;
        let isTypingHello = true;
        
        function typeText() {
          if (isTypingHello && helloIndex < helloText.length) {
            // Typing "Hello"
            helloSpan.textContent = helloText.substring(0, helloIndex + 1);
            nameSpan.classList.remove('typing');
            helloIndex++;
            aboutTypingTimeout = setTimeout(typeText, 60);
          } else if (isTypingHello && helloIndex >= helloText.length) {
            // Finished typing "Hello", move to name text
            isTypingHello = false;
            aboutTypingTimeout = setTimeout(typeText, 100);
          } else if (!isTypingHello && nameIndex < nameText.length) {
            // Typing "My name is Alvin Zhou"
            nameSpan.textContent = nameText.substring(0, nameIndex + 1);
            nameSpan.classList.add('typing');
            nameIndex++;
            aboutTypingTimeout = setTimeout(typeText, 50);
          } else if (!isTypingHello && nameIndex >= nameText.length) {
            // Finished typing everything, remove cursor
            nameSpan.classList.remove('typing');
            aboutTypingTimeout = null;
          }
        }
        
        // Reset and start typing immediately
        helloSpan.textContent = '';
        nameSpan.textContent = '';
        helloIndex = 0;
        nameIndex = 0;
        isTypingHello = true;
        aboutTypingTimeout = setTimeout(typeText, 50);
      };
      
      // Quote rotation state
      let quoteTypingTimeout = null;
      let quoteLoopRunning = false;

      window.stopQuoteRotation = function stopQuoteRotation() {
        quoteLoopRunning = false;
        if (quoteTypingTimeout) clearTimeout(quoteTypingTimeout);
        quoteTypingTimeout = null;
        const el = document.getElementById('about-quote-text');
        if (el) el.textContent = '';
      };

      window.startQuoteRotation = function startQuoteRotation() {
        const el = document.getElementById('about-quote-text');
        if (!el) return;

        // prevent multiple loops
        if (quoteLoopRunning) return;
        quoteLoopRunning = true;

        const quotes = [
          "Design is not just what it looks like and feels like. Design is how it works. — Steve Jobs",
          "Don't try to be original. Just try to be good. — Paul Rand",
          "Design creates culture. — Anonymous",
          "Good design is actually a lot harder to notice than poor design, in part because good designs fit our needs so well that the design is invisible. — Don Norman",
          "Make it simple, but significant. — Don Draper"
        ];

        let i = 0;
        let char = 0;
        let deleting = false;

        function tick() {
          if (!quoteLoopRunning) return;

          const q = quotes[i];

          if (!deleting && char < q.length) {
            el.classList.add('typing');
            el.textContent = q.substring(0, char + 1);
            char++;
            quoteTypingTimeout = setTimeout(tick, 45);
            return;
          }

          if (!deleting && char >= q.length) {
            el.classList.remove('typing');
            quoteTypingTimeout = setTimeout(() => {
              deleting = true;
              tick();
            }, 1800);
            return;
          }

          if (deleting && char > 0) {
            el.classList.add('typing');
            el.textContent = q.substring(0, char - 1);
            char--;
            quoteTypingTimeout = setTimeout(tick, 25);
            return;
          }

          // finished deleting -> next quote
          deleting = false;
          i = (i + 1) % quotes.length;
          quoteTypingTimeout = setTimeout(tick, 350);
        }

        // start fresh
        el.textContent = '';
        char = 0;
        deleting = false;
        i = 0;
        tick();
      };
      
      // (Dedup) About typing/quotes are triggered from showSection() directly.
      
      // Check if about section is visible on load
      const aboutSection = document.getElementById('about');
      if (aboutSection && aboutSection.style.display !== 'none') {
        setTimeout(() => {
          window.typeAboutText?.();
          window.startQuoteRotation?.();
        }, 100);
      }

      // Works controller - Grid View
      // Detailed works data with title, medium, date, description, and image
      let worksData = {
        // The Beginning (2013-2020)
        "Hand-drawn art": {
          title: "Hand-drawn Art",
          medium: "Pencil, Charcoal, Ink on Paper",
          date: "2013–2020",
          image: "",
          thumbnail: "./assets/beginning/beg-01.jpg",
          thumbnailType: "image",
          description: "A collection of traditional sketches and drawings exploring form, perspective, and artistic expression. These foundational works developed my eye for detail and understanding of visual composition.",
          media: [
            { type: "image", src: "./assets/beginning/beg-01.jpg", label: "Hand-drawn Art 1" },
            { type: "image", src: "./assets/beginning/beg-02.jpg", label: "Hand-drawn Art 2" },
            { type: "image", src: "./assets/beginning/beg-03.jpg", label: "Hand-drawn Art 3" },
            { type: "image", src: "./assets/beginning/beg-04.jpg", label: "Hand-drawn Art 4" },
            { type: "image", src: "./assets/beginning/beg-05.jpg", label: "Hand-drawn Art 5" },
            { type: "image", src: "./assets/beginning/beg-06.jpg", label: "Hand-drawn Art 6" },
            { type: "image", src: "./assets/beginning/beg-07.jpg", label: "Hand-drawn Art 7" },
            { type: "image", src: "./assets/beginning/beg-08.jpg", label: "Hand-drawn Art 8" }
          ]
        },
        "Early photography": {
          title: "Early Photography",
          medium: "Digital Photography",
          date: "2015–2020",
          image: "",
          thumbnail: "/assets/works/portfolio/photos/project/IMG_4995.jpg",
          thumbnailType: "image",
          description: "My first explorations into visual storytelling through the lens. Capturing moments, landscapes, and subjects that sparked my passion for visual media and composition.",
          media: [
            {
              type: "image",
              src: "/assets/works/portfolio/photos/project/IMG_4995.jpg",
              label: "Early Photography 1"
            },
            {
              type: "image",
              src: "/assets/works/portfolio/photos/project/IMG_4997.jpg",
              label: "Early Photography 2"
            },
            {
              type: "image",
              src: "/assets/works/portfolio/photos/project/IMG_5003.jpg",
              label: "Early Photography 3"
            },
            {
              type: "image",
              src: "/assets/works/portfolio/photos/project/IMG_5041.jpg",
              label: "Early Photography 4"
            },
            {
              type: "image",
              src: "/assets/works/portfolio/photos/project/IMG_5046.jpg",
              label: "Early Photography 5"
            },
            {
              type: "image",
              src: "/assets/works/portfolio/photos/project/IMG_5052.jpg",
              label: "Early Photography 6"
            },
            {
              type: "image",
              src: "/assets/works/portfolio/photos/project/IMG_5058.jpg",
              label: "Early Photography 7"
            },
            {
              type: "image",
              src: "/assets/works/portfolio/photos/project/IMG_5065.jpg",
              label: "Early Photography 8"
            },
            {
              type: "image",
              src: "/assets/works/portfolio/photos/project/IMG_5070.jpg",
              label: "Early Photography 9"
            },
            {
              type: "image",
              src: "/assets/works/portfolio/photos/project/IMG_5150.jpg",
              label: "Early Photography 10"
            },
            {
              type: "image",
              src: "/assets/works/portfolio/photos/project/IMG_5166.jpg",
              label: "Early Photography 11"
            }
          ]
        },
        "Initial creative exploration": {
          title: "Initial Creative Exploration",
          medium: "Mixed Media",
          date: "2013–2020",
          image: "",
          thumbnail: "/assets/works/portfolio/past-site-files/Artboard 1.png",
          thumbnailType: "image",
          description: "Experimental works across various mediums as I discovered my creative voice. This period of exploration laid the groundwork for my interdisciplinary approach to design.",
          media: [
            { type: "image", src: "/assets/works/portfolio/past-site-files/Artboard 1.png", label: "Creative Exploration 1" },
            { type: "image", src: "/assets/works/portfolio/past-site-files/Artboard 1 copy.png", label: "Creative Exploration 2" },
            { type: "image", src: "/assets/works/portfolio/past-site-files/Artboard 1 copy 2.png", label: "Creative Exploration 3" },
            { type: "image", src: "/assets/works/portfolio/past-site-files/Artboard 1 copy 3.png", label: "Creative Exploration 4" },
            { type: "image", src: "/assets/works/portfolio/past-site-files/Artboard 1 copy 4.png", label: "Creative Exploration 5" },
            { type: "image", src: "/assets/works/portfolio/past-site-files/Artboard 1 copy 5.png", label: "Creative Exploration 6" },
            { type: "image", src: "/assets/works/portfolio/past-site-files/Artboard 1 copy 6.png", label: "Creative Exploration 7" },
            { type: "image", src: "/assets/works/portfolio/past-site-files/part(2)_web-design.PNG", label: "Web Design Part 2" },
            { type: "image", src: "/assets/works/portfolio/past-site-files/part(3)_web-design.PNG", label: "Web Design Part 3" },
            { type: "image", src: "/assets/works/portfolio/final/font finder.PNG", label: "Font Finder" },
            { type: "image", src: "/assets/works/portfolio/final/prototype 1.PNG", label: "Prototype 1" },
            { type: "image", src: "/assets/works/portfolio/final/pt1.PNG", label: "Project Part 1" },
            { type: "image", src: "/assets/works/portfolio/final/pt2.PNG", label: "Project Part 2" },
            { type: "image", src: "/assets/works/portfolio/final/pt3.PNG", label: "Project Part 3" },
            { type: "image", src: "/assets/works/portfolio/final/pt4.PNG", label: "Project Part 4" },
            { type: "image", src: "/assets/works/portfolio/final/pt5.PNG", label: "Project Part 5" },
            { type: "image", src: "/assets/works/portfolio/final/pt6.PNG", label: "Project Part 6" }
          ]
        },
        // Practicality (2018 - Aug 2020)
        "Past Portfolio": {
          title: "Past Portfolio",
          medium: "Digital Design, Physical Media, Portfolio Development",
          date: "2018–2020",
          image: "",
          thumbnail: "/assets/works/past-portfolio/beg-01.jpg",
          thumbnailType: "image",
          description: "I created my first official portfolio showing my work as an artist and a designer. By using both digital and physical tools, I was able to integrate my artist profile into a viewable medium.",
          media: [
            {
              type: "pdf",
              src: "/assets/pdf/portfolio/Portfolio - Alvin Zhou.pdf",
              label: "Past Portfolio - Full Document"
            }
          ]
        },
        "LA Metro TCAP Internship": {
          title: "LA Metro TCAP Internship",
          medium: "Graphic Design, Project Management, Teamwork",
          date: "Jun 2020 – Aug 2020",
          image: "",
          thumbnail: "/assets/works/portfolio/TCAAP/TCAP Gridlock Buster Project.jpg",
          thumbnailType: "image",
          description: "The TCAP Metro Internship Program highlighted skills including teamwork, project management, and leadership opportunities. I worked as a Graphic Designer for my group project representing Metro's Gridlock system as a game.",
          media: [
            {
              type: "pdf",
              src: "/assets/pdf/TCAAP/TCAP Gridlock Buster Project.pdf",
              label: "Gridlock Buster Project Presentation"
            }
          ]
        },
        // Self-identification (2020-Present)
        "Other People Magazine": {
          title: "Other People Magazine",
          medium: "Social Media, Content Creation, Marketing",
          date: "Sep 2022 – Sep 2024",
          image: "",
          thumbnail: "/assets/works/OPM/first.PNG",
          thumbnailType: "image",
          description: "As Social Media Director, I led the team that advertises, creates, and maintains a social media presence amongst the literary magazine community at UCSD. Produced content and endorsed both community engagement and collaboration with other organizations.",
          media: [
            {
              type: "image",
              src: "/assets/works/OPM/first.PNG",
              label: "Other People Magazine - Cover"
            },
            {
              type: "image",
              src: "/assets/works/OPM/compiled3.png",
              label: "Other People Magazine - Compiled 3"
            },
            {
              type: "image",
              src: "/assets/works/OPM/2.PNG",
              label: "Other People Magazine - Design 2"
            },
            {
              type: "image",
              src: "/assets/works/OPM/7.PNG",
              label: "Other People Magazine - Design 7"
            },
            {
              type: "image",
              src: "/assets/works/OPM/compiled2.png",
              label: "Other People Magazine - Compiled 2"
            },
            {
              type: "image",
              src: "/assets/works/OPM/17.PNG",
              label: "Other People Magazine - Design 17"
            },
            {
              type: "image",
              src: "/assets/works/OPM/compiled.png",
              label: "Other People Magazine - Compiled"
            }
          ]
        },
        "PixelPact": {
          title: "PixelPact",
          medium: "UI/UX Design, App Development, Figma",
          date: "Sep 2024 – Dec 2024",
          image: "",
          thumbnail: "/assets/works/pixel/phone_screen_mockup.png",
          thumbnailType: "image",
          description: "For ten weeks, my team and I created an app that assists individuals in the design/computer science field whilst expanding their experience and portfolio. Each month individuals can participate in a monthly competition with other skill-matched teammates to compete from prompts given by non-profit organizations. Team: Taylor Tak, Madison Yu, Hamin Lee, Karen Li. I learned the importance of teamwork, time management, and user testing feedback.",
          media: [
            {
              type: "image",
              src: "/assets/works/pixel/phone_screen_mockup.png",
              label: "PixelPact Phone Mockup"
            },
            {
              type: "pdf",
              src: "/assets/pdf/pixel/Project Pitch 1.pdf",
              label: "Project Pitch"
            },
            {
              type: "pdf",
              src: "/assets/pdf/pixel/PixelPact - Phase II.pdf",
              label: "Phase II"
            },
            {
              type: "pdf",
              src: "/assets/pdf/pixel/Phase 3 Slides (Prototype).pdf",
              label: "Phase III - Prototype"
            },
            {
              type: "pdf",
              src: "/assets/pdf/pixel/PIXELPACT FINAL PHASE (3).pdf",
              label: "Final Phase"
            }
          ],
          links: [
            {
              label: "View Project Site",
              url: "https://sites.google.com/ucsd.edu/pixelpact/home"
            },
            {
              label: "View Figma Prototype",
              url: "https://www.figma.com/design/yFE2PUUgY6bixwV0Thbwyx/PixelPact-COGS-123--Copy-"
            }
          ]
        },
        "ReliefHub": {
          title: "ReliefHub",
          medium: "UI/UX Design, Kiosk System, User Research",
          date: "Jan 2025 – Mar 2025",
          image: "",
          thumbnail: "/assets/works/relief/kiosk.png",
          thumbnailType: "image",
          description: "The Relief-Hub Kiosk aims to assist those in need of medical assistance ranging from simple cuts to overdoses. We targeted individuals in festival and concert venue settings with quick assistance when medical tents are full. Team: Min Li, Nina Yu, Martica Manual.",
          media: [
            { type: "image", src: "/assets/works/relief/final1.png", label: "ReliefHub Final Design" },
            { type: "image", src: "/assets/works/relief/kiosk.png", label: "Kiosk Design" },
            { type: "image", src: "/assets/works/relief/kiosk.jpg", label: "Kiosk Mockup" },
            { type: "image", src: "/assets/works/relief/kiosk2.jpg", label: "Kiosk Mockup 2" },
            { type: "image", src: "/assets/works/relief/prototype1.jpg", label: "Prototype 1" },
            { type: "image", src: "/assets/works/relief/prototype2.jpg", label: "Prototype 2" },
            { type: "pdf", src: "/assets/pdf/relief/ReliefHub (1).pdf", label: "ReliefHub Document" },
            { type: "pdf", src: "/assets/pdf/relief/A3 Final Slides Team 8 (2).pdf", label: "Final Presentation Slides" }
          ],
          links: [
            {
              label: "View Figma Prototype",
              url: "https://www.figma.com/design/K8GrFgQh3vvMK7187rs82n/DSGN-100-Final-Prototype"
            },
            {
              label: "ReliefHub Document (PDF)",
              url: "/assets/pdf/relief/ReliefHub (1).pdf"
            },
            {
              label: "Final Presentation Slides (PDF)",
              url: "/assets/pdf/relief/A3 Final Slides Team 8 (2).pdf"
            }
          ]
        },
        "SpotSwitch": {
          title: "SpotSwitch",
          medium: "Product Design, UI/UX, Prototyping",
          date: "Jan 2024 – Mar 2024",
          image: "",
          thumbnail: "/assets/works/spotswitch/product.png",
          thumbnailType: "image",
          description: "Worked with three classmates to tackle the well-known parking issue throughout the UCSD community. We created many different prototypes and ideas and finally landed on SPOT SWITCH — the solution to UCSD's student parking issue. Team: Kieran Vu, Ruslan Bodelan, Hugo Hu.",
          media: [
            {
              type: "image",
              src: "/assets/works/spotswitch/product.png",
              label: "SpotSwitch Product Design"
            },
            {
              type: "image",
              src: "/assets/works/spotswitch/logo.png",
              label: "SpotSwitch Logo"
            },
            {
              type: "pdf",
              src: "/assets/pdf/spotswitch/1711008763747.pdf",
              label: "SpotSwitch Document 1"
            },
            {
              type: "pdf",
              src: "/assets/pdf/spotswitch/1711008842784.pdf",
              label: "SpotSwitch Document 2"
            }
          ]
        },
        "Superhuman Bikes Internship": {
          title: "Superhuman Bikes Internship",
          medium: "Graphic Design, Adobe Illustrator, Photoshop",
          date: "Aug 2024 – Dec 2024",
          image: "",
          thumbnail: "/assets/works/portfolio/superhuman-bikes/champ-manuak/champ-cover.png",
          thumbnailType: "image",
          description: "Created visuals and graphic assets for bikes through the use of Adobe Illustrator and Photoshop. Focused on expanding my knowledge of design through fellow employees while testing new design methods such as Product Design and Product Creation/Prototyping.",
          media: [
            {
              type: "pdf",
              src: "/assets/pdf/superhuman-bikes/Final draft.pdf",
              label: "The Champ f7 Bike Manual"
            }
          ]
        },
        "Game Development UI (DSA)": {
          title: "Game Development UI (DSA) - NDA",
          medium: "UI/UX Design, Game Design",
          date: "December 2025 – Present",
          image: "",
          thumbnail: "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='400'%3E%3Crect width='400' height='400' fill='white'/%3E%3C/svg%3E",
          thumbnailType: "image",
          description: "Collaborating with other designers, we created a cohesive UI that feels part of the data science oriented game world while staying clear and intuitive. This project showcases my practice in immersive, player-centered interface design.",
          media: [
            {
              type: "image",
              src: "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='800' height='600'%3E%3Crect width='800' height='600' fill='white'/%3E%3C/svg%3E",
              label: "NDA Content"
            }
          ]
        },
        "Current Portfolio": {
          title: "Current Portfolio",
          medium: "Interactive Portfolio, Web Design",
          date: "2025",
          image: "",
          // Use the PDF itself as the thumbnail (renders page 1)
          thumbnail: "/assets/pdf/interactive/Interactive Portfolio.pdf",
          thumbnailType: "pdf",
          description: "An interactive portfolio showcasing my work as a Graphic & Interaction Designer. This portfolio demonstrates my skills in UI/UX design, brand identity, and creative coding projects.",
          media: [
            {
              type: "pdf",
              src: "/assets/pdf/interactive/Interactive Portfolio.pdf",
              label: "Interactive Portfolio - Full Document"
            }
          ]
        },
        "UI Design (Rill Insights)": {
          title: "UI Design (Rill Insights)",
          medium: "UI/UX Design, Brand Design, Figma, Webflow, Adobe",
          date: "Aug 2025 – Present",
          image: "",
          thumbnail: "./portfolio images/Rill Insights/LogoMain.png",
          thumbnailType: "image",
          description: "Mentored by Joey Neal, I led the Rill Insights brand redesign across logos, web layouts, and promotional materials while building scalable brand systems in Figma, Webflow, and Adobe. I used AI-assisted tools to speed up prototyping, took part in weekly critiques, and engaged in design networking events to gather feedback and explore client opportunities.",
          media: [
            { type: "pdf", src: "./portfolio images/Rill Insights/Service Overview.pdf", label: "Service Overview" },
            { type: "pdf", src: "./portfolio images/Rill Insights/1pagerdraft.pdf", label: "One Pager" },
            { type: "image", src: "./portfolio images/Rill Insights/circular logo blueblack.svg", label: "Circular Logo" },
            { type: "image", src: "./portfolio images/Rill Insights/LogoMain.png", label: "Logo Main" },
            { type: "image", src: "./portfolio images/Rill Insights/logonegative.png", label: "Logo Negative" }
          ],
          links: [
            {
              label: "Visit Rill Insights Website",
              url: "https://www.rillinsights.com/"
            }
          ]
        },
        "Brand Artist and UI Design (San Diego Design Week)": {
          title: "Brand Artist and UI Design (San Diego Design Week)",
          medium: "Brand Identity, Visual Design, Motion Graphics",
          date: "Apr 2025 – Sep 2025",
          image: "",
          thumbnail: "/assets/works/SDDW/LOGO - BLACK BG.png",
          thumbnailType: "image",
          description: "Created re-brand assets for the Design Forward Alliance on their annual 2025 San Diego Design Week. Deliverables included: 8+ Logo Design/Style Guide, 10+ Poster Design and Mocks, 6+ Animated Logos and Design Assets, and 8+ Social Media Posts.",
          media: [
            { type: "image", src: "/assets/works/SDDW/LOGO - BLACK BG.png", label: "Logo - Black Background" },
            { type: "image", src: "/assets/works/SDDW/LOGO - WHITE BG.png", label: "Logo - White Background" },
            { type: "image", src: "/assets/works/SDDW/20205 dates logo inc.png", label: "2025 Dates Logo" },
            { type: "image", src: "/assets/works/SDDW/TYPO-STYLE-PALETTE.png", label: "Typography & Style Palette" },
            { type: "image", src: "/assets/works/SDDW/Artboard 1.png", label: "Artboard Design" },
            { type: "image", src: "/assets/works/SDDW/SDDW.png", label: "SDDW Branding" },
            { type: "image", src: "/assets/works/SDDW/bannerstyle 1.png", label: "Banner Style 1" },
            { type: "image", src: "/assets/works/SDDW/bannerstyle 2.jpg", label: "Banner Style 2" },
            { type: "image", src: "/assets/works/SDDW/bannerstyle 3.jpg", label: "Banner Style 3" },
            { type: "image", src: "/assets/works/SDDW/largebanner black bg.jpg", label: "Large Banner" },
            { type: "image", src: "/assets/works/SDDW/smallboard black bg.jpg", label: "Small Board" },
            { type: "image", src: "/assets/works/SDDW/webheader perspective1.jpg", label: "Web Header" },
            { type: "image", src: "/assets/works/SDDW/flyer mockblack.jpg", label: "Flyer Mockup" },
            { type: "image", src: "/assets/works/SDDW/branded document header.png", label: "Document Header" },
            { type: "image", src: "/assets/works/SDDW/Certificate Award MASTERFILE.png", label: "Certificate Award" },
            { type: "image", src: "/assets/works/SDDW/designforimpactinfo.png", label: "Design for Impact Info" },
            { type: "image", src: "/assets/works/SDDW/SDopening.png", label: "SD Opening" },
            { type: "image", src: "/assets/works/SDDW/SDvip1.png", label: "SD VIP" },
            { type: "image", src: "/assets/works/SDDW/New CORPORATE SPONSOR FILE.jpg", label: "Corporate Sponsor" },
            { type: "image", src: "/assets/works/SDDW/1 week left.png", label: "1 Week Left Post" },
            { type: "image", src: "/assets/works/SDDW/Starts today.png", label: "Starts Today Post" },
            { type: "image", src: "/assets/works/SDDW/submissionareopenlogo.png", label: "Submissions Open" },
            { type: "image", src: "/assets/works/SDDW/logo2gif.gif", label: "Animated Logo" },
            { type: "pdf", src: "/assets/pdf/SDDW/award poster design MASTERFILE.pdf", label: "Award Poster Design" }
          ],
          links: [
            {
              label: "View San Diego Design Week",
              url: "https://sddesignweek.org/"
            }
          ]
        },
        "p5.js Music Synthesizer": {
          title: "p5.js Music Synthesizer",
          medium: "JavaScript, p5.js, Web Audio API",
          date: "Jan 2026",
          image: "",
          thumbnail: "/assets/video/p5.js/PureData.MOV",
          thumbnailType: "video",
          description: "For our upcoming PureData project, my goal was to work with Pd to create a music synthesizer that can play around with different frequencies. As an individual who has minimal experience with the application, I decided to take a fun approach by trying to recreate music on pd that allows for octave changes. Using the tutorial attached below, I made it my framework as I experimented with adding more octave frequencies, played with different amounts of randomized notes, and set more disparities between frequencies and their beat timers.",
          media: [
            {
              type: "video",
              src: "/assets/video/p5.js/PureData.MOV",
              label: "PureData Synthesizer Demo"
            }
          ]
        },
        "MPI Cluster Music Synthesizer": {
          title: "MPI Cluster Music Synthesizer",
          medium: "C++, MPI, Audio Programming",
          date: "2022–Present",
          image: "",
          thumbnail: "/assets/video/MPI cluster/Dance of the Comets.mp4",
          thumbnailType: "video",
          description: "A music synthesizer built on distributed computing principles using MPI. This project combines my interests in audio, programming, and high-performance computing.",
          media: [
            {
              type: "video",
              src: "/assets/video/MPI cluster/Dance of the Comets.mp4",
              label: "Dance of the Comets - Video"
            }
          ],
          links: [
            {
              label: "View Project Reflection (PDF)",
              url: "/assets/pdf/MPI cluster/Dance of the Comets Reflection (1).pdf"
            }
          ]
        }
      };

      // Standardize any stragglers (defensive) and URL-encode on use.
      (function standardizeWorksData() {
        const walk = (obj) => {
          if (!obj) return;
          if (Array.isArray(obj)) {
            obj.forEach(walk);
            return;
          }
          if (typeof obj !== 'object') return;
          for (const k of Object.keys(obj)) {
            const v = obj[k];
            if (typeof v === 'string' && (k === 'src' || k === 'url' || k === 'thumbnail' || k === 'image')) {
              obj[k] = normalizeAssetPath(v);
            } else {
              walk(v);
            }
          }
        };
        walk(worksData);
      })();

      function renderGridView() {
        const grid = document.getElementById('worksGridView');
        if (!grid) return;
        
        // Use the same data structure for grid view
        const worksCategories = [
          {
            key: "beginning",
            title: "The Beginning",
            year: "2013–2020",
            hint: "Where it started — early experiments, curiosity, and first creative tools.",
            items: [
              "Early photography",
              "Hand-drawn art",
              "Initial creative exploration"
            ]
          },
          {
            key: "practicality",
            title: "Practicality",
            year: "2018–2020",
            hint: "Learning by doing — making work that solved real constraints fast.",
            items: [
              "LA Metro TCAP Internship",
              "Past Portfolio"
            ]
          },
          {
            key: "self",
            title: "Self-identification",
            year: "2020–Present",
            hint: "My style takes shape — projects that feel most like *me*.",
            items: [
              "Game Development UI (DSA)",
              "Current Portfolio",
              "UI Design (Rill Insights)",
              "Brand Artist and UI Design (San Diego Design Week)",
              "ReliefHub",
              "PixelPact",
              "Superhuman Bikes Internship",
              "SpotSwitch",
              "Other People Magazine",
              "p5.js Music Synthesizer",
              "MPI Cluster Music Synthesizer"
            ]
          }
        ];
        
        // Reverse order: most recent first
        const ordered = worksCategories.slice().reverse();
        
        grid.innerHTML = ordered.map((c, idx) => `
          <div class="works-grid-row">
            <div class="works-category">
              <div class="works-meta">
                <h2>${c.title}</h2>
                <div class="works-year">${c.year}</div>
                <div class="works-hint">${c.hint}</div>
              </div>
              <div class="works-tiles">
                ${c.items.map(t => {
                  const work = worksData[t];
                  const hasThumbnail = work && work.thumbnail;
                  const isVideo = work && work.thumbnailType === 'video';
                  const isPdfThumb = work && work.thumbnailType === 'pdf';
                  const thumbSrc = work && work.thumbnail ? normalizeAssetPath(work.thumbnail) : '';
                  const safeThumb = thumbSrc ? encodeURI(thumbSrc) : '';
                  return `
                  <div class="work-tile ${hasThumbnail ? 'has-thumbnail' : ''}" data-work-key="${t}">
                    ${hasThumbnail ? (
                      isVideo
                        ? `<video class="tile-thumbnail" src="${safeThumb}" muted loop playsinline preload="metadata"></video>`
                        : isPdfThumb
                          ? `<div class="tile-thumbnail media-fallback" role="img" aria-label="${t} (PDF)"><span>PDF</span></div>`
                          : `<img class="tile-thumbnail" src="${safeThumb}" alt="${t}" loading="lazy" decoding="async" />`
                    ) : ''}
                    <div class="tile-label">${t}</div>
                  </div>
                `}).join('')}
              </div>
            </div>
          </div>
        `).join('');
        
        // Add click handlers to tiles
        grid.querySelectorAll('.work-tile').forEach(tile => {
          tile.addEventListener('click', () => {
            const workKey = tile.dataset.workKey;
            openWorkModal(workKey, tile);
          });
          
          // Add hover handlers for video thumbnails
          const videoThumb = tile.querySelector('video.tile-thumbnail');
          if (videoThumb) {
            tile.addEventListener('mouseenter', () => {
              videoThumb.play().catch(() => {}); // Ignore autoplay errors
            });
            tile.addEventListener('mouseleave', () => {
              videoThumb.pause();
              videoThumb.currentTime = 0;
            });
          }

          // Graceful fallback for missing images/videos
          const imgThumb = tile.querySelector('img.tile-thumbnail');
          if (imgThumb) {
            imgThumb.addEventListener('error', () => {
              const fb = document.createElement('div');
              fb.className = 'tile-thumbnail media-fallback';
              fb.setAttribute('role', 'img');
              fb.setAttribute('aria-label', `${tile.dataset.workKey || 'Work'} thumbnail unavailable`);
              fb.innerHTML = `<span>Thumbnail unavailable</span>`;
              imgThumb.replaceWith(fb);
            }, { once: true });
          }
          if (videoThumb) {
            videoThumb.addEventListener('error', () => {
              const fb = document.createElement('div');
              fb.className = 'tile-thumbnail media-fallback';
              fb.setAttribute('role', 'img');
              fb.setAttribute('aria-label', `${tile.dataset.workKey || 'Work'} video unavailable`);
              fb.innerHTML = `<span>Video unavailable</span>`;
              videoThumb.replaceWith(fb);
            }, { once: true });
          }
        });
      }
      // Expose for showSection() hook (single source of truth)
      window.renderGridView = renderGridView;
      
      // Works modal functions
      // Works modal carousel state
      let worksCarouselMedia = [];
      let worksCarouselIndex = 0;
      
      function openWorkModal(workKey, triggerElement) {
        const data = worksData[workKey];
        if (!data) return;
        
        const modal = document.getElementById('works-modal');
        const titleEl = document.getElementById('works-modal-title');
        const mediumEl = document.getElementById('works-modal-medium');
        const dateEl = document.getElementById('works-modal-date');
        const descEl = document.getElementById('works-modal-description');
        const singleImageContainer = document.getElementById('works-modal-single-image');
        const carousel = document.getElementById('works-modal-carousel');
        const imageEl = document.getElementById('works-modal-image');
        const placeholderEl = document.getElementById('works-modal-image-placeholder');
        
        if (!modal || !titleEl || !mediumEl || !dateEl || !descEl) return;
        
        // Add NDA class for blurring
        if (workKey === "Game Development UI (DSA)") {
          modal.classList.add('nda-content');
        } else {
          modal.classList.remove('nda-content');
        }
        
        titleEl.textContent = data.title;
        mediumEl.textContent = data.medium;
        dateEl.textContent = data.date;
        descEl.textContent = data.description;
        
        // Check if this work has media items
        if (data.media && data.media.length > 0) {
          // Use media carousel
          worksCarouselMedia = data.media;
          worksCarouselIndex = 0;
          
          if (singleImageContainer) singleImageContainer.style.display = 'none';
          if (carousel) {
            carousel.style.display = 'block';
            setupWorksCarousel();
            showWorksCarouselItem(0);
            
            // Hide arrows, indicators, and label if only one media item
            const prevBtn = document.getElementById('worksCarouselPrev');
            const nextBtn = document.getElementById('worksCarouselNext');
            const indicators = document.getElementById('works-carousel-indicators');
            const carouselLabel = document.getElementById('works-carousel-label');
            if (data.media.length === 1) {
              if (prevBtn) prevBtn.style.display = 'none';
              if (nextBtn) nextBtn.style.display = 'none';
              if (indicators) indicators.style.display = 'none';
              if (carouselLabel) carouselLabel.style.display = 'none';
            } else {
              if (prevBtn) prevBtn.style.display = 'flex';
              if (nextBtn) nextBtn.style.display = 'flex';
              if (indicators) indicators.style.display = 'flex';
              if (carouselLabel) carouselLabel.style.display = 'block';
            }
          }
        } else {
          // Use single image fallback
          worksCarouselMedia = [];
          if (carousel) carousel.style.display = 'none';
          if (singleImageContainer) singleImageContainer.style.display = 'block';
          
          if (imageEl && placeholderEl) {
            if (data.image && data.image.trim() !== '') {
              imageEl.src = data.image;
              imageEl.alt = data.title;
              imageEl.style.display = 'block';
              placeholderEl.classList.add('hidden');
            } else {
              imageEl.src = '';
              imageEl.style.display = 'none';
              placeholderEl.classList.remove('hidden');
            }
          }
        }
        
        // Handle links (documents, external resources)
        const linksContainer = document.getElementById('works-modal-links');
        if (linksContainer) {
          if (data.links && data.links.length > 0) {
            linksContainer.innerHTML = data.links.map(link => 
              `<a href="${link.url}" target="_blank" rel="noopener noreferrer" class="works-modal-link">${link.label}</a>`
            ).join('');
            linksContainer.style.display = 'flex';
          } else {
            linksContainer.innerHTML = '';
            linksContainer.style.display = 'none';
          }
        }
        
        // Works modal open: preserve scroll position and suppress section scroll-to-top
        __restoreScrollY = window.scrollY;
        __suppressNextSectionScroll = true;

        // Show modal with accessibility features (restore focus to triggering tile)
        openModalWithAccessibility(modal, triggerElement || null);
      }
      
      function setupWorksCarousel() {
        const indicators = document.getElementById('works-carousel-indicators');
        if (!indicators) return;
        
        // Create indicator dots
        indicators.innerHTML = worksCarouselMedia.map((item, idx) => 
          `<button class="works-carousel-dot ${idx === 0 ? 'active' : ''}" 
                   data-index="${idx}" 
                   aria-label="Go to ${item.label || 'item ' + (idx + 1)}"
                   type="button"></button>`
        ).join('');
        
        // Add click handlers to dots
        indicators.querySelectorAll('.works-carousel-dot').forEach(dot => {
          dot.addEventListener('click', (e) => {
            const idx = parseInt(e.target.dataset.index);
            showWorksCarouselItem(idx);
          });
        });
      }
      
      function showWorksCarouselItem(index) {
        if (worksCarouselMedia.length === 0) return;
        
        // Clamp index (no infinite loop, just bounce between items)
        if (index < 0) index = 0;
        if (index >= worksCarouselMedia.length) index = worksCarouselMedia.length - 1;
        
        worksCarouselIndex = index;
        const item = worksCarouselMedia[index];
        
        // Hide all carousel items
        const videoContainer = document.getElementById('works-carousel-video');
        const pdfContainer = document.getElementById('works-carousel-pdf');
        const imageContainer = document.getElementById('works-carousel-image-item');
        const video = document.getElementById('works-modal-video');
        const videoSource = document.getElementById('works-modal-video-source');
        const pdf = document.getElementById('works-modal-pdf');
        const pdfDownload = document.getElementById('works-modal-pdf-download');
        // The carousel image element might be dynamically created (to avoid early "" src errors)
        let carouselImage = document.getElementById('works-carousel-image');
        const label = document.getElementById('works-carousel-label');
        
        if (videoContainer) videoContainer.style.display = 'none';
        if (pdfContainer) pdfContainer.style.display = 'none';
        if (imageContainer) imageContainer.style.display = 'none';
        
        // Pause video when switching away
        if (video) {
          video.pause();
        }
        
        // Show the appropriate item
        const toSrc = (s) => encodeURI(normalizeAssetPath(s));
        const ext = (s) => {
          const clean = (s || '').split('#', 1)[0].split('?', 1)[0];
          const m = clean.match(/\.([a-z0-9]+)$/i);
          return m ? m[1].toLowerCase() : '';
        };
        const videoMime = (s) => {
          const e = ext(s);
          if (e === 'mov') return 'video/quicktime';
          if (e === 'webm') return 'video/webm';
          return 'video/mp4';
        };

        if (item.type === 'video') {
          if (videoContainer && video && videoSource) {
            video.muted = true;
            video.playsInline = true;
            video.preload = 'metadata';
            videoSource.src = toSrc(item.src);
            videoSource.type = videoMime(item.src);
            video.load();
            videoContainer.style.display = 'flex';
          }
        } else if (item.type === 'pdf') {
          if (pdfContainer && pdf && pdfDownload) {
            const src = toSrc(item.src);
            // Preview is not reliable across all browsers; always provide a direct link.
            pdf.setAttribute('title', item.label || 'PDF document');
            pdf.src = src + '#toolbar=0&navpanes=0&scrollbar=0&view=FitH';
            pdfDownload.href = src;
            pdfContainer.style.display = 'flex';
          }
        } else if (item.type === 'image') {
          if (imageContainer) {
            if (!carouselImage) {
              carouselImage = document.createElement('img');
              carouselImage.id = 'works-carousel-image';
              carouselImage.alt = '';
              imageContainer.appendChild(carouselImage);
            }
            carouselImage.src = toSrc(item.src);
            carouselImage.alt = item.label || '';
            imageContainer.style.display = 'flex';
            // Apply dark background for negative logo
            if (item.src.includes('logonegative')) {
              imageContainer.style.backgroundColor = '#1a1a1a';
            } else {
              imageContainer.style.backgroundColor = '#ffffff';
            }
          }
        }
        
        // Update label
        if (label) {
          label.textContent = item.label || '';
        }
        
        // Update indicator dots
        document.querySelectorAll('.works-carousel-dot').forEach((dot, idx) => {
          dot.classList.toggle('active', idx === index);
        });
        
        // Update arrow visibility (disable at ends for non-infinite)
        const prevBtn = document.getElementById('worksCarouselPrev');
        const nextBtn = document.getElementById('worksCarouselNext');
        if (prevBtn) {
          prevBtn.style.opacity = index === 0 ? '0.3' : '1';
          prevBtn.style.pointerEvents = index === 0 ? 'none' : 'auto';
        }
        if (nextBtn) {
          nextBtn.style.opacity = index === worksCarouselMedia.length - 1 ? '0.3' : '1';
          nextBtn.style.pointerEvents = index === worksCarouselMedia.length - 1 ? 'none' : 'auto';
        }
      }
      
      window.worksCarouselPrev = function() {
        showWorksCarouselItem(worksCarouselIndex - 1);
      };
      
      window.worksCarouselNext = function() {
        showWorksCarouselItem(worksCarouselIndex + 1);
      };
      
      // Carousel navigation click handlers are set up in the IIFE at the bottom of the file
      
      // Make closeWorkModal global so it can be called from anywhere
      window.closeWorkModal = function() {
        const modal = document.getElementById('works-modal');
        if (!modal) return;
        
        // Pause video if playing
        const video = document.getElementById('works-modal-video');
        if (video) {
          video.pause();
          video.currentTime = 0;
        }
        
        // Clear PDF iframe
        const pdf = document.getElementById('works-modal-pdf');
        if (pdf) {
          pdf.src = '';
        }
        
        closeModalWithAccessibility(modal);
      };
      
      // Keyboard listener for works modal and zoom
      document.addEventListener('keydown', function(e) {
        const modal = document.getElementById('works-modal');
        const zoomOverlay = document.getElementById('image-zoom-overlay');
        const isZoomActive = zoomOverlay && zoomOverlay.classList.contains('active');
        const isModalActive = modal && modal.classList.contains('active');
        
        // Escape key - close zoom first, then modal
        if (e.key === 'Escape') {
          if (isZoomActive) {
            window.closeImageZoom();
          } else if (isModalActive) {
            window.closeWorkModal();
          }
        }
        
        // Arrow keys for carousel navigation (when modal open but not zoomed)
        if (isModalActive && !isZoomActive && worksCarouselMedia.length > 1) {
          if (e.key === 'ArrowLeft') {
            e.preventDefault();
            window.worksCarouselPrev();
          } else if (e.key === 'ArrowRight') {
            e.preventDefault();
            window.worksCarouselNext();
          }
        }
      });
      
      // Image Zoom Functionality - made global for access from IIFE
      window.openImageZoom = function(imgSrc, imgAlt) {
        const overlay = document.getElementById('image-zoom-overlay');
        const zoomImg = document.getElementById('image-zoom-img');
        if (!overlay || !zoomImg) return;
        
        zoomImg.src = imgSrc;
        zoomImg.alt = imgAlt || 'Zoomed image';
        overlay.classList.add('active');
        overlay.setAttribute('aria-hidden', 'false');
      };
      
      window.closeImageZoom = function() {
        const overlay = document.getElementById('image-zoom-overlay');
        if (!overlay) return;
        
        overlay.classList.remove('active');
        overlay.setAttribute('aria-hidden', 'true');
      };
      
      // Image zoom click handlers are set up in the IIFE at the bottom of the file

      // (Dedup) Works grid rendering is handled inside showSection() when entering Works.
      
      // Navigation bar float effect
      const nav = document.querySelector('nav');
      let lastScrollY = window.scrollY;
      let navTicking = false;
      
      function updateNavPosition() {
        const currentScrollY = window.scrollY;
        
        // If at the very top of the page (within 20px), show nav
        if (currentScrollY <= 20) {
          nav.classList.remove('hidden');
        }
        // If scrolling down past 100px, hide nav
        else if (currentScrollY > lastScrollY && currentScrollY > 100) {
          nav.classList.add('hidden');
        }
        // Otherwise keep current state (don't show just because scrolling up)
        
        lastScrollY = currentScrollY;
        navTicking = false;
      }
      
      function onNavScroll() {
        if (!navTicking) {
          window.requestAnimationFrame(updateNavPosition);
          navTicking = true;
        }
      }
      
      // Initial state - show nav if at top
      updateNavPosition();
      window.addEventListener('scroll', onNavScroll, { passive: true });

      // Featured works carousel - truly infinite with no repositioning
      const featuredSquaresInner = document.querySelector('.featured-works-squares-inner');
      const carouselPrev = document.getElementById('carouselPrev');
      const carouselNext = document.getElementById('carouselNext');
      
      if (featuredSquaresInner) {
        // Get original squares before cloning
        const originalSquares = Array.from(featuredSquaresInner.querySelectorAll('.featured-square'));
        const totalOriginal = originalSquares.length;
        
        if (totalOriginal > 0) {
          // Clone squares many times for true infinite scrolling (no repositioning needed)
          // Add 20 full sets before and 20 full sets after - user can click 100+ times
          const cloneSets = 20;
          for (let set = 0; set < cloneSets; set++) {
            for (let i = totalOriginal - 1; i >= 0; i--) {
              const cloneBefore = originalSquares[i].cloneNode(true);
              cloneBefore.classList.add('clone');
              featuredSquaresInner.insertBefore(cloneBefore, featuredSquaresInner.firstChild);
            }
          }
          for (let set = 0; set < cloneSets; set++) {
            for (let i = 0; i < totalOriginal; i++) {
              const cloneAfter = originalSquares[i].cloneNode(true);
              cloneAfter.classList.add('clone');
              featuredSquaresInner.appendChild(cloneAfter);
            }
          }
          
          // Now get all squares including clones
          const allSquares = Array.from(featuredSquaresInner.querySelectorAll('.featured-square'));
          // Start at the middle (originals section)
          let currentIndex = cloneSets * totalOriginal;
          let isAnimating = false;
          
          // Update spotlight class on all squares
          function updateSpotlight(index) {
            allSquares.forEach((sq, i) => {
              if (i === index) {
                sq.classList.add('spotlight');
              } else {
                sq.classList.remove('spotlight');
              }
            });
          }
          
          // Get scroll position to center a square
          function getScrollTarget(index) {
            const square = allSquares[index];
            if (!square) return 0;
            const container = featuredSquaresInner;
            const containerWidth = container.offsetWidth;
            const squareWidth = square.offsetWidth;
            const squareOffsetLeft = square.offsetLeft;
            return squareOffsetLeft - (containerWidth / 2) + (squareWidth / 2);
          }
          
          // Center the carousel on a specific square
          function scrollToSquare(index, smooth = true) {
            if (allSquares.length === 0 || isAnimating) return;
            if (index < 0 || index >= allSquares.length) return;
            
            currentIndex = index;
            updateSpotlight(index);
            
            const scrollTarget = getScrollTarget(index);
            const container = featuredSquaresInner;
            
            if (smooth) {
              isAnimating = true;
              container.scrollTo({
                left: scrollTarget,
                behavior: 'smooth'
              });
              setTimeout(() => {
                isAnimating = false;
              }, 350);
            } else {
              container.scrollLeft = scrollTarget;
            }
          }
          
          // Go to next slide - always moves right
          function nextSlide() {
            if (isAnimating) return;
            if (currentIndex < allSquares.length - 1) {
              scrollToSquare(currentIndex + 1);
            }
          }
          
          // Go to previous slide - always moves left
          function prevSlide() {
            if (isAnimating) return;
            if (currentIndex > 0) {
              scrollToSquare(currentIndex - 1);
            }
          }
          
          // Arrow button handlers
          if (carouselPrev) {
            carouselPrev.addEventListener('click', (e) => {
              e.preventDefault();
              e.stopPropagation();
              prevSlide();
            });
          }
          
          if (carouselNext) {
            carouselNext.addEventListener('click', (e) => {
              e.preventDefault();
              e.stopPropagation();
              nextSlide();
            });
          }
          
          // Initialize - center on first original square
          const startIndex = cloneSets * totalOriginal;
          
          // Some refreshes can run before layout/images/fonts are ready, which makes
          // offset measurements return 0 and leaves the carousel stuck at the far left.
          // Retry centering a few times, and also re-center on full window load.
          function centerOnStartWithRetry(attempt = 0) {
            // Try to center without smooth scrolling (instant)
            scrollToSquare(startIndex, false);
            
            // If we're still pinned to the far-left, layout likely isn't ready yet.
            // Retry briefly a few times.
            if (featuredSquaresInner.scrollLeft <= 2 && attempt < 10) {
              setTimeout(() => centerOnStartWithRetry(attempt + 1), 120);
            }
          }
          
          // First attempt shortly after clones are added
          setTimeout(() => centerOnStartWithRetry(0), 60);
          
          // Re-center once all assets are fully loaded (more reliable on refresh)
          window.addEventListener('load', () => {
            centerOnStartWithRetry(0);
          });
          
          // Re-center once fonts are ready (can affect measurements)
          if (document.fonts && typeof document.fonts.ready?.then === 'function') {
            document.fonts.ready.then(() => centerOnStartWithRetry(0)).catch(() => {});
          }
          
          // Recenter on window resize
          window.addEventListener('resize', () => {
            scrollToSquare(currentIndex, false);
          });
          
          // Keyboard navigation
          document.addEventListener('keydown', (e) => {
            // Only if home section is visible
            const homeSection = document.getElementById('home');
            if (!homeSection || homeSection.style.display === 'none') return;
            
            if (e.key === 'ArrowLeft') {
              e.preventDefault();
              prevSlide();
            } else if (e.key === 'ArrowRight') {
              e.preventDefault();
              nextSlide();
            }
          });
        }
      }

      // Project modal functionality
      const modal = document.getElementById('project-modal');
      const modalTitle = document.getElementById('modal-title');
      const modalSubtitle = document.getElementById('modal-subtitle');
      const modalSummary = document.getElementById('modal-summary');
      const modalTools = document.getElementById('modal-tools');
      const modalClose = document.querySelector('.modal-close');

      // Project data
      const projectData = {
        sddw: {
          title: 'San Diego Design Week',
          subtitle: '2025 Brand Identity',
          summary: 'A comprehensive brand identity system for San Diego Design Week 2025, celebrating the intersection of culture, design, and community. The identity reflects the vibrant, diverse design landscape of San Diego while maintaining a cohesive visual language across all event materials and digital platforms.',
          tools: ['Illustrator', 'Photoshop', 'InDesign', 'Figma', 'Brand Systems']
        },
        pixelpact: {
          title: 'PixelPact',
          subtitle: 'Collaborative Design Platform',
          summary: 'A real-time collaborative design workspace that enables multiple designers to work simultaneously on projects. Built with systems thinking at its core, PixelPact streamlines the design process through live multi-user editing, version control, and seamless integration with design tools.',
          tools: ['Figma', 'React', 'WebSockets', 'Systems Design', 'UI/UX']
        },
        reliefhub: {
          title: 'ReliefHub',
          subtitle: 'Preventative Care Kiosk',
          summary: 'A human-centered health interface designed for preventative care kiosks in public spaces. ReliefHub makes healthcare information and resources accessible through an intuitive, empathetic interface that guides users through health assessments and connects them with appropriate care resources.',
          tools: ['Figma', 'User Research', 'Prototyping', 'Human-Centered Design', 'Accessibility']
        },
        spotswitch: {
          title: 'SpotSwitch',
          subtitle: 'Real-Time Parking Companion',
          summary: 'A mobile application that solves urban parking challenges through real-time availability tracking, intelligent routing, and predictive analytics. SpotSwitch helps drivers find parking efficiently while reducing traffic congestion and environmental impact in dense urban areas.',
          tools: ['Figma', 'React Native', 'Maps API', 'Real-Time Data', 'Mobile Design']
        },
        distributed: {
          title: 'Distributed Generative Systems',
          subtitle: 'Multi-screen generative audio & media systems',
          summary: 'A body of creative coding and interdisciplinary media work exploring real-time music synthesis, distributed display systems, and hybrid digital–physical creative practice. This project spans MPI cluster synthesizers, p5.js instruments, photography/video studies, and hand-drawn experimentation.',
          tools: ['p5.js', 'Python', 'Adobe Lightroom', 'Adobe Premiere Pro', 'Adobe Illustrator', 'Adobe Photoshop', 'Pen & paper', 'Acrylic', 'Pencil']
        }
      };

      function openModal(projectKey, triggerElement) {
        const data = projectData[projectKey];
        if (!data) return;

        modalTitle.textContent = data.title;
        modalSubtitle.textContent = data.subtitle;
        modalSummary.textContent = data.summary;
        
        // Clear and populate tools
        modalTools.innerHTML = '';
        data.tools.forEach(tool => {
          const li = document.createElement('li');
          li.textContent = tool;
          modalTools.appendChild(li);
        });

        // Show modal with accessibility features (restore focus to triggering tile)
        openModalWithAccessibility(modal, triggerElement || null);
      }

      function closeModal() {
        closeModalWithAccessibility(modal);
      }

      // Add click handlers to featured squares
      document.addEventListener('click', (e) => {
        const square = e.target.closest('.featured-square[data-project], .featured-square[data-work]');
        if (square) {
          const workKey = square.getAttribute('data-work');
          const projectKey = square.getAttribute('data-project');
          if (workKey && typeof openWorkModal === 'function') {
            openWorkModal(workKey, square);
          } else if (projectKey) {
            openModal(projectKey, square);
          }
        }
      });

      // Keyboard support for squares
      document.addEventListener('keydown', (e) => {
        if (e.key === 'Enter' || e.key === ' ') {
          const square = e.target.closest('.featured-square[data-project], .featured-square[data-work]');
          if (square) {
            e.preventDefault();
            const workKey = square.getAttribute('data-work');
            const projectKey = square.getAttribute('data-project');
            if (workKey && typeof openWorkModal === 'function') {
              openWorkModal(workKey, square);
            } else if (projectKey) {
              openModal(projectKey, square);
            }
          }
        }
      });

      // Close modal handlers
      if (modalClose) {
        modalClose.addEventListener('click', closeModal);
      }

      // Close on overlay click
      modal.addEventListener('click', (e) => {
        if (e.target === modal) {
          e.preventDefault();
          e.stopPropagation();
          closeModal();
        }
      });

      // Close on Escape key
      document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape' && modal.classList.contains('active')) {
          closeModal();
        }
      });

      // Note: To slow down the GIF, you'll need to convert it to MP4/WebM video format
      // Then use: videoElement.playbackRate = 0.3; (0.3 = 30% speed)
      // CSS/JavaScript cannot slow down animated GIF frame rates directly
      // The GIF is now at 90% size as requested

      // Animated gradient background with random positions - DISABLED (using canvas instead)
      const gradientBackground = document.getElementById('animated-gradient-background');
      if (false && gradientBackground) { // Disabled
        // Use only green, pink, and purple colors - 2 of each for 6 blobs total
        const baseColors = ['#649394', '#F472B6', '#A88BFA']; // green, pink, purple
        const sizes = ['600px', '650px', '700px', '750px', '800px', '850px'];
        
        // Create array with 2 of each color (randomly shuffled)
        const colorPalette = [...baseColors, ...baseColors].sort(() => Math.random() - 0.5);
        const shuffledSizes = [...sizes].sort(() => Math.random() - 0.5);
        
        // Create 6 blobs with 2 of each color randomly assigned
        const colors = [];
        for (let i = 0; i < 6; i++) {
          colors.push({
            color: colorPalette[i],
            size: shuffledSizes[i]
          });
        }
        
        const blobs = [];
        
        // Generate random starting positions for each color - ensure all stay visible and spaced out
        const minDistance = 300; // Minimum distance between blob centers
        
        colors.forEach((colorData, index) => {
          const blob = document.createElement('div');
          blob.className = 'gradient-blob';
          const blobSize = parseInt(colorData.size);
          blob.style.width = colorData.size;
          blob.style.height = colorData.size;
          
          // Convert hex to rgba for gradient stops
          function hexToRgba(hex, alpha) {
            const r = parseInt(hex.slice(1, 3), 16);
            const g = parseInt(hex.slice(3, 5), 16);
            const b = parseInt(hex.slice(5, 7), 16);
            return `rgba(${r}, ${g}, ${b}, ${alpha})`;
          }
          
          // Generate freeform organic blob shape using border-radius (works better with gradients)
          function generateBlobBorderRadius() {
            // Create organic shape using varying border-radius values
            const values = [];
            for (let i = 0; i < 8; i++) {
              // Random values between 30% and 70% for organic feel
              const val1 = 30 + Math.random() * 40;
              const val2 = 30 + Math.random() * 40;
              values.push(`${val1}% ${val2}%`);
            }
            return values.join(' / ');
          }
          
          // Create radial gradient for the blob (from center color to transparent edges)
          const gradientCenterX = 30 + Math.random() * 40; // Random center position 30-70%
          const gradientCenterY = 30 + Math.random() * 40;
          
          const baseColor = colorData.color;
          // Create a visible gradient with multiple stops fading to transparent
          blob.style.background = `radial-gradient(circle at ${gradientCenterX}% ${gradientCenterY}%, ${baseColor} 0%, ${baseColor} 15%, ${hexToRgba(baseColor, 0.9)} 30%, ${hexToRgba(baseColor, 0.7)} 45%, ${hexToRgba(baseColor, 0.5)} 60%, ${hexToRgba(baseColor, 0.3)} 75%, ${hexToRgba(baseColor, 0.1)} 90%, transparent 100%)`;
          
          // Apply freeform organic shape using border-radius (works with gradients)
          blob.style.borderRadius = generateBlobBorderRadius();
          
          // Random initial position within viewport bounds
          // Account for blob size to keep at least part of it visible
          const minX = -blobSize * 0.3;
          const maxX = window.innerWidth - blobSize * 0.7;
          const minY = -blobSize * 0.3;
          const maxY = window.innerHeight - blobSize * 0.7;
          
          // Generate position that maintains minimum distance from existing blobs
          let startX, startY;
          let attempts = 0;
          let validPosition = false;
          
          while (!validPosition && attempts < 100) {
            startX = minX + Math.random() * (maxX - minX);
            startY = minY + Math.random() * (maxY - minY);
            
            // Calculate blob center
            const centerX = startX + blobSize / 2;
            const centerY = startY + blobSize / 2;
            
            // Check distance from existing blobs
            validPosition = true;
            for (let existingBlob of blobs) {
              const existingCenterX = existingBlob.currentX + existingBlob.size / 2;
              const existingCenterY = existingBlob.currentY + existingBlob.size / 2;
              
              const distance = Math.sqrt(
                Math.pow(centerX - existingCenterX, 2) + 
                Math.pow(centerY - existingCenterY, 2)
              );
              
              if (distance < minDistance) {
                validPosition = false;
                break;
              }
            }
            
            attempts++;
          }
          
          // If we couldn't find a valid position after 100 attempts, use the last generated position
          // Set left/top to 0 so transform controls all positioning
          blob.style.left = '0px';
          blob.style.top = '0px';
          
          gradientBackground.appendChild(blob);
          
          blobs.push({
            element: blob,
            currentX: startX,
            currentY: startY,
            targetX: startX,
            targetY: startY,
            baseX: startX,  // Base position for normal movement
            baseY: startY,  // Base position for normal movement
            speedX: (Math.random() - 0.5) * 0.5,
            speedY: (Math.random() - 0.5) * 0.5,
            size: blobSize
          });
        });
        
        // Track mouse position for interactive movement
        const mousePos = { x: window.innerWidth / 2, y: window.innerHeight / 2 };
        const interactionRadius = 500; // Distance at which blobs react to mouse
        const repulsionStrength = 100; // How strongly blobs are pushed away
        
        // Add mouse move listener - make sure it's on document, not just window
        const handleMouseMove = (e) => {
          mousePos.x = e.clientX;
          mousePos.y = e.clientY;
          // Debug: log first few mouse moves to verify it's working
          if (window.mouseMoveCount === undefined) {
            window.mouseMoveCount = 0;
          }
          if (window.mouseMoveCount < 5) {
            debugLog('Mouse moved to:', mousePos.x, mousePos.y, 'Distance to first blob:', 
              blobs.length > 0 ? Math.sqrt(
                Math.pow((blobs[0].currentX + blobs[0].size / 2) - mousePos.x, 2) + 
                Math.pow((blobs[0].currentY + blobs[0].size / 2) - mousePos.y, 2)
              ) : 'N/A');
            window.mouseMoveCount++;
          }
        };
        
        // Add to both document and window to ensure it works
        document.addEventListener('mousemove', handleMouseMove, { passive: true });
        window.addEventListener('mousemove', handleMouseMove, { passive: true });
        
        // Animate the blobs slowly moving around with mouse interaction
        function animateBlobs() {
          blobs.forEach(blob => {
            // Calculate blob center position
            const blobCenterX = blob.currentX + blob.size / 2;
            const blobCenterY = blob.currentY + blob.size / 2;
            
            // Calculate distance from mouse to blob center
            const dx = blobCenterX - mousePos.x;
            const dy = blobCenterY - mousePos.y;
            const distance = Math.sqrt(dx * dx + dy * dy);
            
            // Apply mouse interaction (repulsion - blobs move away from cursor)
            if (distance < interactionRadius && distance > 0) {
              // Calculate repulsion force (stronger when closer)
              const force = (interactionRadius - distance) / interactionRadius;
              const angle = Math.atan2(dy, dx);
              
              // Push blob away from cursor - calculate target offset
              const pushX = Math.cos(angle) * force * repulsionStrength;
              const pushY = Math.sin(angle) * force * repulsionStrength;
              
              // Set target position based on base position + mouse repulsion
              blob.targetX = blob.baseX + pushX;
              blob.targetY = blob.baseY + pushY;
            } else {
              // Normal movement when mouse is far away - update base position
              blob.baseX += blob.speedX;
              blob.baseY += blob.speedY;
              blob.targetX = blob.baseX;
              blob.targetY = blob.baseY;
            }
            
            // Keep blobs within viewport bounds (accounting for their size)
            const minX = -blob.size * 0.3;
            const maxX = window.innerWidth - blob.size * 0.7;
            const minY = -blob.size * 0.3;
            const maxY = window.innerHeight - blob.size * 0.7;
            
            // Constrain base position to bounds and reverse direction if hitting edges
            if (blob.baseX < minX) {
              blob.baseX = minX;
              blob.speedX *= -1;
            } else if (blob.baseX > maxX) {
              blob.baseX = maxX;
              blob.speedX *= -1;
            }
            
            if (blob.baseY < minY) {
              blob.baseY = minY;
              blob.speedY *= -1;
            } else if (blob.baseY > maxY) {
              blob.baseY = maxY;
              blob.speedY *= -1;
            }
            
            // Constrain target position to bounds
            if (blob.targetX < minX) blob.targetX = minX;
            if (blob.targetX > maxX) blob.targetX = maxX;
            if (blob.targetY < minY) blob.targetY = minY;
            if (blob.targetY > maxY) blob.targetY = maxY;
            
            // Smoothly move towards target (slower, smoother when mouse is interacting)
            const smoothingFactor = distance < interactionRadius ? 0.06 : 0.05;
            blob.currentX += (blob.targetX - blob.currentX) * smoothingFactor;
            blob.currentY += (blob.targetY - blob.currentY) * smoothingFactor;
            
            blob.element.style.transform = `translate(${blob.currentX}px, ${blob.currentY}px)`;
          });
          
          requestAnimationFrame(animateBlobs);
        }
        
        // Update bounds on window resize
        window.addEventListener('resize', () => {
          blobs.forEach(blob => {
            const minX = -blob.size * 0.3;
            const maxX = window.innerWidth - blob.size * 0.7;
            const minY = -blob.size * 0.3;
            const maxY = window.innerHeight - blob.size * 0.7;
            
            // Clamp current positions to new bounds
            if (blob.targetX < minX) blob.targetX = minX;
            if (blob.targetX > maxX) blob.targetX = maxX;
            if (blob.targetY < minY) blob.targetY = minY;
            if (blob.targetY > maxY) blob.targetY = maxY;
            
            if (blob.currentX < minX) blob.currentX = minX;
            if (blob.currentX > maxX) blob.currentX = maxX;
            if (blob.currentY < minY) blob.currentY = minY;
            if (blob.currentY > maxY) blob.currentY = maxY;
          });
        });
        
        // Start animation immediately
        debugLog('Starting blob animation with', blobs.length, 'blobs');
        animateBlobs();
      }
    });
    
    // ===== KINETIC LAYOUT MESH BACKGROUND =====
    document.addEventListener('DOMContentLoaded', () => {
      debugLog('bg mesh running');
      
      const canvas = document.getElementById('bg-canvas');
      if (!canvas) {
        console.error('Canvas not found');
        return;
      }
      
      const ctx = canvas.getContext('2d');
      const dpr = window.devicePixelRatio || 1;
      
      // Check for reduced motion preference
      const prefersReducedMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
      
      // Color palette
      const teal = { r: 100, g: 147, b: 148 }; // #649394
      const violet = { r: 168, g: 139, b: 250 }; // #A88BFA
      
      // Grid configuration
      const gridSpacing = window.innerWidth < 768 ? 120 : 150;
      const connectionDistance = gridSpacing * 1.8;
      const mouseRadius = 200;
      const springStrength = 0.12;
      const damping = 0.88;
      
      // Grid points
      const points = [];
      let gridCols = 0;
      let gridRows = 0;
      
      // Mouse state
      const mouse = {
        x: window.innerWidth / 2,
        y: window.innerHeight / 2,
        tx: window.innerWidth / 2,
        ty: window.innerHeight / 2
      };
      
      // Click ripples
      const ripples = [];
      
      // Initialize grid points
      function initGrid() {
        points.length = 0;
        const width = window.innerWidth;
        const height = window.innerHeight;
        
        gridCols = Math.ceil(width / gridSpacing) + 1;
        gridRows = Math.ceil(height / gridSpacing) + 1;
        
        const startX = (width - (gridCols - 1) * gridSpacing) / 2;
        const startY = (height - (gridRows - 1) * gridSpacing) / 2;
        
        for (let row = 0; row < gridRows; row++) {
          for (let col = 0; col < gridCols; col++) {
            const ax = startX + col * gridSpacing;
            const ay = startY + row * gridSpacing;
            
            points.push({
              ax: ax, // anchor x
              ay: ay, // anchor y
              x: ax,
              y: ay,
              vx: 0,
              vy: 0,
              phase: Math.random() * Math.PI * 2,
              row: row,
              col: col
            });
          }
        }
      }
      
      // Get point index from row/col
      function getPointIndex(row, col) {
        if (row < 0 || row >= gridRows || col < 0 || col >= gridCols) return -1;
        return row * gridCols + col;
      }
      
      // Resize canvas
      function resize() {
        canvas.width = window.innerWidth * dpr;
        canvas.height = window.innerHeight * dpr;
        canvas.style.width = window.innerWidth + 'px';
        canvas.style.height = window.innerHeight + 'px';
        ctx.setTransform(dpr, 0, 0, dpr, 0, 0);
        initGrid();
      }
      
      // Create click ripple
      function createRipple(x, y) {
        ripples.push({
          x: x,
          y: y,
          r: 0,
          alpha: 1.0,
          maxR: 400
        });
      }
      
      // Update points with breathing and mouse interaction
      function updatePoints(delta, time) {
        mouse.x += (mouse.tx - mouse.x) * 0.15;
        mouse.y += (mouse.ty - mouse.y) * 0.15;
        
        const t = time * 0.001;
        
        points.forEach(point => {
          // Breathing offset (gentle drift)
          const ox = Math.sin(t + point.phase) * 6;
          const oy = Math.cos(t * 0.9 + point.phase) * 6;
          
          // Calculate distance from mouse
          const dx = point.x - mouse.x;
          const dy = point.y - mouse.y;
          const dist = Math.sqrt(dx * dx + dy * dy);
          
          // Mouse influence (magnetic pull + swirl)
          if (dist < mouseRadius && dist > 0) {
            const force = (mouseRadius - dist) / mouseRadius;
            const angle = Math.atan2(dy, dx);
            
            // Pull toward mouse
            const pullX = Math.cos(angle) * force * 15;
            const pullY = Math.sin(angle) * force * 15;
            
            // Tangential swirl
            const swirlAngle = angle + Math.PI / 2;
            const swirlX = Math.cos(swirlAngle) * force * 8;
            const swirlY = Math.sin(swirlAngle) * force * 8;
            
            point.vx += (pullX + swirlX) * delta;
            point.vy += (pullY + swirlY) * delta;
          }
          
          // Spring back to anchor + breathing
          const targetX = point.ax + ox;
          const targetY = point.ay + oy;
          const springX = (targetX - point.x) * springStrength;
          const springY = (targetY - point.y) * springStrength;
          
          point.vx += springX * delta;
          point.vy += springY * delta;
          
          // Apply damping
          point.vx *= damping;
          point.vy *= damping;
          
          // Update position
          point.x += point.vx * delta;
          point.y += point.vy * delta;
        });
      }
      
      // Update ripples
      function updateRipples(delta) {
        for (let i = ripples.length - 1; i >= 0; i--) {
          const ripple = ripples[i];
          ripple.r += 150 * delta;
          ripple.alpha -= 1.5 * delta;
          
          if (ripple.r > ripple.maxR || ripple.alpha <= 0) {
            ripples.splice(i, 1);
          }
        }
      }
      
      // Get line color with subtle tint
      function getLineColor(p1, p2, distance, rippleBoost) {
        const midX = (p1.x + p2.x) / 2;
        const midY = (p1.y + p2.y) / 2;
        
        // Distance-based alpha
        const distAlpha = 1 - (distance / connectionDistance);
        let alpha = 0.08 + distAlpha * 0.15;
        
        // Ripple boost
        alpha += rippleBoost * 0.3;
        alpha = Math.min(alpha, 0.4);
        
        // Occasional aurora tint (subtle)
        const tintChance = (midX + midY) * 0.01;
        const useTint = Math.sin(tintChance) > 0.7;
        
        if (useTint) {
          const tintMix = (Math.sin(tintChance * 2) + 1) / 2;
          const color = tintMix < 0.5 ? teal : violet;
          return `rgba(${color.r}, ${color.g}, ${color.b}, ${alpha})`;
        }
        
        return `rgba(255, 255, 255, ${alpha})`;
      }
      
      // Get ripple boost for line
      function getRippleBoost(x, y) {
        let boost = 0;
        ripples.forEach(ripple => {
          const dx = x - ripple.x;
          const dy = y - ripple.y;
          const dist = Math.sqrt(dx * dx + dy * dy);
          const bandWidth = 30;
          const distFromRipple = Math.abs(dist - ripple.r);
          
          if (distFromRipple < bandWidth) {
            const bandAlpha = 1 - (distFromRipple / bandWidth);
            boost += ripple.alpha * bandAlpha * 0.5;
          }
        });
        return Math.min(boost, 1);
      }
      
      // Draw mesh
      function draw(time) {
        // Clear with subtle trails
        ctx.fillStyle = 'rgba(5, 6, 11, 0.15)';
        ctx.fillRect(0, 0, canvas.width / dpr, canvas.height / dpr);
        
        // Draw lines with glow
        ctx.globalCompositeOperation = 'lighter';
        ctx.lineCap = 'round';
        ctx.lineJoin = 'round';
        ctx.lineWidth = window.innerWidth < 768 ? 1 : 1.2;
        
        // Connect grid neighbors (same row/col + diagonals)
        const connections = new Set();
        
        points.forEach(point => {
          const { row, col } = point;
          const neighbors = [
            [row, col + 1],     // right
            [row + 1, col],     // down
            [row + 1, col + 1], // diagonal down-right
            [row + 1, col - 1]  // diagonal down-left
          ];
          
          neighbors.forEach(([nRow, nCol]) => {
            const nIdx = getPointIndex(nRow, nCol);
            if (nIdx >= 0 && nIdx < points.length) {
              // Create unique connection key
              const key1 = `${row}-${col}-${nRow}-${nCol}`;
              const key2 = `${nRow}-${nCol}-${row}-${col}`;
              
              if (!connections.has(key1) && !connections.has(key2)) {
                connections.add(key1);
                
                const p2 = points[nIdx];
                const dx = p2.x - point.x;
                const dy = p2.y - point.y;
                const distance = Math.sqrt(dx * dx + dy * dy);
                
                if (distance < connectionDistance * 1.5) {
                  const midX = (point.x + p2.x) / 2;
                  const midY = (point.y + p2.y) / 2;
                  const rippleBoost = getRippleBoost(midX, midY);
                  const color = getLineColor(point, p2, distance, rippleBoost);
                  
                  ctx.strokeStyle = color;
                  ctx.beginPath();
                  ctx.moveTo(point.x, point.y);
                  ctx.lineTo(p2.x, p2.y);
                  ctx.stroke();
                }
              }
            }
          });
        });
        
        ctx.globalCompositeOperation = 'source-over';
        
        // Draw ultra-faint points (optional, very subtle)
        if (false) { // Set to true to show very faint points
          ctx.fillStyle = 'rgba(255, 255, 255, 0.05)';
          points.forEach(point => {
            ctx.beginPath();
            ctx.arc(point.x, point.y, 1.5, 0, Math.PI * 2);
            ctx.fill();
          });
        }
      }
      
      // Animation loop
      let lastTime = performance.now();
      let animationId = null;
      
      function animate(currentTime) {
        if (document.hidden) return;
        
        const delta = Math.min((currentTime - lastTime) / 16.67, 2);
        lastTime = currentTime;
        
        if (!prefersReducedMotion) {
          updatePoints(delta, currentTime);
          updateRipples(delta);
        }
        
        draw(currentTime);
        animationId = requestAnimationFrame(animate);
      }
      
      // Event listeners
      let pendingPointer = null;
      let pointerRaf = 0;
      function handleMouseMove(e) {
        pendingPointer = { x: e.clientX, y: e.clientY };
        if (pointerRaf) return;
        pointerRaf = requestAnimationFrame(() => {
          pointerRaf = 0;
          if (!pendingPointer) return;
          mouse.tx = pendingPointer.x;
          mouse.ty = pendingPointer.y;
          pendingPointer = null;
        });
      }
      
      function handleMouseDown(e) {
        createRipple(e.clientX, e.clientY);
      }
      
      function handleTouchStart(e) {
        if (e.touches.length > 0) {
          const touch = e.touches[0];
          mouse.tx = touch.clientX;
          mouse.ty = touch.clientY;
          createRipple(touch.clientX, touch.clientY);
        }
      }
      
      function handleTouchMove(e) {
        if (e.touches.length > 0) {
          const touch = e.touches[0];
          mouse.tx = touch.clientX;
          mouse.ty = touch.clientY;
        }
      }
      
      // Initialize
      resize();
      
      if (prefersReducedMotion) {
        draw(performance.now());
      } else {
        animate(performance.now());
      }
      
      // Event listeners
      window.addEventListener('resize', resize, { passive: true });
      document.addEventListener('mousemove', handleMouseMove, { passive: true });
      document.addEventListener('mousedown', handleMouseDown, { passive: true });
      document.addEventListener('touchstart', handleTouchStart, { passive: true });
      document.addEventListener('touchmove', handleTouchMove, { passive: true });
      
      // Handle visibility change
      document.addEventListener('visibilitychange', () => {
        if (document.hidden && animationId) {
          cancelAnimationFrame(animationId);
          animationId = null;
        }
        if (!document.hidden && !prefersReducedMotion && !animationId) {
          lastTime = performance.now();
          animate(performance.now());
        }
      });
    });
    
    // ===== CONTACT PAGE FUNCTIONALITY =====
    document.addEventListener('DOMContentLoaded', function() {
      // Copy email functionality
      const copyEmailBtn = document.getElementById('copyEmailBtn');
      const emailValue = document.getElementById('emailValue');
      const toast = document.getElementById('toast');
      
      if (copyEmailBtn && emailValue) {
        copyEmailBtn.addEventListener('click', async function(e) {
          e.preventDefault();
          e.stopPropagation();
          
          const email = emailValue.textContent.trim();
          
          try {
            await navigator.clipboard.writeText(email);
            showToast('Copied email!');
          } catch (err) {
            // Fallback for older browsers
            const textArea = document.createElement('textarea');
            textArea.value = email;
            textArea.style.position = 'fixed';
            textArea.style.opacity = '0';
            document.body.appendChild(textArea);
            textArea.select();
            try {
              document.execCommand('copy');
              showToast('Copied email!');
            } catch (fallbackErr) {
              showToast('Failed to copy');
            }
            document.body.removeChild(textArea);
          }
        });
      }
      
      // Toast notification function
      function showToast(message) {
        if (!toast) return;
        
        toast.textContent = message;
        toast.classList.add('show');
        
        setTimeout(() => {
          toast.classList.remove('show');
        }, 3000);
      }
      
      // Contact form handling
      const contactForm = document.getElementById('contactForm');
      const contactSuccess = document.getElementById('contactSuccess');
      
      if (contactForm) {
        contactForm.addEventListener('submit', function(e) {
          e.preventDefault();
          
          // Get form values
          const name = document.getElementById('contactName').value.trim();
          const email = document.getElementById('contactEmail').value.trim();
          const subject = document.getElementById('contactSubject').value;
          const message = document.getElementById('contactMessage').value.trim();
          
          // Clear previous errors
          clearErrors();
          
          // Validate
          let isValid = true;
          
          if (!name) {
            showError('nameError', 'Name is required');
            isValid = false;
          }
          
          if (!email) {
            showError('emailError', 'Email is required');
            isValid = false;
          } else if (!isValidEmail(email)) {
            showError('emailError', 'Please enter a valid email address');
            isValid = false;
          }
          
          if (!subject) {
            showError('subjectError', 'Please select a subject');
            isValid = false;
          }
          
          if (!message) {
            showError('messageError', 'Message is required');
            isValid = false;
          }
          
          if (!isValid) {
            return;
          }
          
          // Build mailto URL
          const emailBody = `Hello,\n\n${message}\n\nBest regards,\n${name}`;
          const mailtoUrl = `mailto:${emailValue ? emailValue.textContent.trim() : 'no360717@gmail.com'}?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(emailBody)}`;
          
          // Show success message
          if (contactSuccess) {
            contactSuccess.style.display = 'block';
          }
          showToast('Opening email client...');
          
          // Open mailto link
          setTimeout(() => {
            window.location.href = mailtoUrl;
          }, 500);
        });
      }
      
      // Error display helper
      function showError(errorId, message) {
        const errorEl = document.getElementById(errorId);
        if (errorEl) {
          errorEl.textContent = message;
        }
      }
      
      // Clear all errors
      function clearErrors() {
        const errorIds = ['nameError', 'emailError', 'subjectError', 'messageError'];
        errorIds.forEach(id => {
          const errorEl = document.getElementById(id);
          if (errorEl) {
            errorEl.textContent = '';
          }
        });
        if (contactSuccess) {
          contactSuccess.style.display = 'none';
        }
      }
      
      // Email validation
      function isValidEmail(email) {
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        return emailRegex.test(email);
      }
      
      // Real-time validation on blur
      const nameInput = document.getElementById('contactName');
      const emailInput = document.getElementById('contactEmail');
      const subjectSelect = document.getElementById('contactSubject');
      const messageTextarea = document.getElementById('contactMessage');
      
      if (nameInput) {
        nameInput.addEventListener('blur', function() {
          if (!this.value.trim()) {
            showError('nameError', 'Name is required');
          } else {
            showError('nameError', '');
          }
        });
      }
      
      if (emailInput) {
        emailInput.addEventListener('blur', function() {
          const value = this.value.trim();
          if (!value) {
            showError('emailError', 'Email is required');
          } else if (!isValidEmail(value)) {
            showError('emailError', 'Please enter a valid email address');
          } else {
            showError('emailError', '');
          }
        });
      }
      
      if (subjectSelect) {
        subjectSelect.addEventListener('change', function() {
          if (this.value) {
            showError('subjectError', '');
          }
        });
      }
      
      if (messageTextarea) {
        messageTextarea.addEventListener('blur', function() {
          if (!this.value.trim()) {
            showError('messageError', 'Message is required');
          } else {
            showError('messageError', '');
          }
        });
      }
      
    });
    
  </script>
</head>
<body>
    <a href="#home" class="skip-link">Skip to content</a>
    <canvas id="bg-canvas" aria-hidden="true"></canvas>
    <div class="base-bg"></div>
    <div class="animated-gradient-background" id="animated-gradient-background"></div>
    <div class="loading-screen">
      <div class="loading-logo">
        <img src="./assets/logo/white-logo.png" alt="Alvin Zhou logo">
      </div>
      <div class="loading-bar-container">
        <div class="loading-bar"></div>
      </div>
    </div>
    <nav>
    <div class="logo">
      <img src="./assets/logo/white-logo.png" alt="Alvin Zhou logo">
    </div>
    <ul class="nav-options">
      <li><a href="#home" class="active">Home</a></li>
      <li><a href="#about">About</a></li>
      <li><a href="#works">Works</a></li>
      <li><a href="#contact">Contact</a></li>
    </ul>
  </nav>
  <div class="main-content">
    <div id="home" class="section">
      <div class="hero-type-wrap">
        <h1 id="hero-text"></h1>
      </div>
      <div class="home-buttons">
        <a href="#about" class="home-button">About Me</a>
        <a href="#contact" class="home-button">Contact Me</a>
      </div>
      <h2 class="featured-works-title">Featured Works</h2>
      <div class="featured-works-squares">
        <button class="carousel-arrow carousel-arrow-left" id="carouselPrev" aria-label="Previous project">‹</button>
        <div class="featured-works-squares-inner">
          <!-- Square 1: SDDW -->
          <div class="featured-square sddw" data-project="sddw" role="button" tabindex="0" aria-label="Open project details: San Diego Design Week">
            <div class="featured-square-inner">
              <div class="project-media">
                <img id="slow-gif" src="./assets/works/SDDW/logo2gif.gif" alt="San Diego Design Week animated logo" loading="lazy" decoding="async">
              </div>
              <div class="project-overlay">
                <div class="project-title">San Diego Design Week</div>
                <div class="project-descriptor">2025 Brand Identity</div>
                <div class="project-metadata">↳ Cultural branding · Event systems</div>
              </div>
            </div>
          </div>
          
          <!-- Square 2: PixelPact -->
          <div class="featured-square pixelpact" data-project="pixelpact" role="button" tabindex="0" aria-label="Open project details: PixelPact">
            <div class="featured-square-inner">
              <div class="project-media">
                <img src="./assets/works/pixel/phone_screen_mockup.png" alt="PixelPact phone screen mockup" loading="lazy" decoding="async">
              </div>
              <div class="project-overlay">
                <div class="project-title">PixelPact</div>
                <div class="project-descriptor">Collaborative Design Platform</div>
                <div class="project-metadata">↳ Live multi-user workspace · Systems thinking</div>
              </div>
            </div>
          </div>
          
          <!-- Square 3: ReliefHub -->
          <div class="featured-square reliefhub" data-project="reliefhub" role="button" tabindex="0" aria-label="Open project details: ReliefHub">
            <div class="featured-square-inner">
              <div class="project-media">
                <img src="./assets/works/relief/kiosk.png" alt="ReliefHub kiosk design" loading="lazy" decoding="async">
              </div>
              <div class="project-overlay">
                <div class="project-title">ReliefHub</div>
                <div class="project-descriptor">Preventative Care Kiosk</div>
                <div class="project-metadata">↳ Human-centered health interface</div>
              </div>
            </div>
          </div>
          
          <!-- Square 4: SpotSwitch -->
          <div class="featured-square spotswitch" data-project="spotswitch" role="button" tabindex="0" aria-label="Open project details: SpotSwitch">
            <div class="featured-square-inner">
              <div class="project-media">
                <img src="./assets/works/spotswitch/product.png" alt="SpotSwitch product design" loading="lazy" decoding="async">
              </div>
              <div class="project-overlay">
                <div class="project-title">SpotSwitch</div>
                <div class="project-descriptor">Real-Time Parking Companion</div>
                <div class="project-metadata">↳ Navigation · Availability · Routing</div>
              </div>
            </div>
          </div>
          
          <!-- Square 5: Interdisciplinary Computational Art -->
          <div class="featured-square distributed" data-project="distributed" role="button" tabindex="0" aria-label="Open project details: Distributed Generative Systems">
            <div class="featured-square-inner">
              <div class="project-media">
                <img src="./assets/works/comets/screen.png" alt="Distributed Generative Systems screenshot" loading="lazy" decoding="async">
              </div>
              <div class="project-overlay">
                <div class="project-title">Distributed Generative Systems</div>
                <div class="project-descriptor">Speculative Interaction Research</div>
                <div class="project-metadata">↳ MPI clusters · audio-reactive · multi-screen</div>
              </div>
            </div>
          </div>
          
          <!-- Square 6: UI Design (Rill Insights) -->
          <div class="featured-square rill-insights" data-work="UI Design (Rill Insights)" role="button" tabindex="0" aria-label="Open project details: UI Design (Rill Insights)">
            <div class="featured-square-inner">
              <div class="project-media">
                <img src="./assets/works/rill-insights/LogoMain.png" alt="Rill Insights logo (brand redesign)" loading="lazy" decoding="async">
              </div>
              <div class="project-overlay">
                <div class="project-title">UI Design<br>(Rill Insights)</div>
                <div class="project-descriptor">Brand Redesign & Systems</div>
                <div class="project-metadata">↳ UI/UX Design · Brand Design · Figma · Webflow</div>
              </div>
            </div>
          </div>
        </div>
        <button class="carousel-arrow carousel-arrow-right" id="carouselNext" aria-label="Next project">›</button>
      </div>
      <a href="#works" class="view-works-button">View My Works</a>
    </div>
    <div id="about" class="section" style="display:none;">
      <div class="about-container">
        <div class="about-photo">
          <img src="./assets/profile/profile.jpg" alt="Portrait photo of Alvin Zhou" loading="lazy" decoding="async" width="560" height="560">
        </div>
        <div class="about-text">
          <h2 id="about-text"><span class="hello"></span><span class="name-text"></span></h2>
          <div class="about-body">
            <p>I am a fourth-year undergraduate at UC San Diego majoring in Interdisciplinary Computing &amp; the Arts (ICAM) with a minor in Design. I've been passionate about graphic design and UI/UX since my freshman year of high school, and I thrive at the intersection of creativity, technology, and visual storytelling.</p>
            <p class="subtitle"><strong>What I Do</strong></p>
            <p>I specialize in digital design and creative development, with experience across the Adobe Creative Suite and other design tools such as:</p>
            <ul class="skills-list-about">
              <li>Photoshop</li>
              <li>Illustrator</li>
              <li>InDesign</li>
              <li>Lightroom</li>
              <li>Premiere Pro</li>
              <li>Figma</li>
              <li>Cursor</li>
              <li>Lovable</li>
            </ul>
            <p>Alongside design, I actively practice photography; focusing on portraits, landscapes, and nature photography; which continues to shape my eye for composition, color, and storytelling.</p>
            <p class="subtitle"><strong>My Goal</strong></p>
            <p>My goal is to gain hands-on industry experience and continue refining my creative and technical skill set in order to become a well-rounded, professional graphic and interaction designer by the time I graduate from UCSD.</p>
            <div class="about-quotes-float">
              <div class="about-quotes-label">Design Fuel</div>
              <div class="about-quotes-line">
                <span id="about-quote-text" class="about-quote-text typing"></span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div id="works" class="section" style="display:none;">
      <div class="works-stage">

        <div class="works-topbar">
          <div class="works-header">
            <h2>My Experience</h2>
          </div>

        </div>

        <div class="works-body">
          <!-- Grid view -->
          <div id="worksGridView" class="works-grid-view" aria-label="Works grid view"></div>
        </div>

      </div>
    </div>
    <div id="contact" class="section" style="display:none;">
      <div class="contact-stage">
        <div class="contact-left">
          <h2 class="contact-title">Contact Me</h2>
          <p class="contact-subtitle">Let's build something clean, intentional, and a little bold.</p>
          
          <div class="contact-availability">
            <span class="availability-pill">Open to internships</span>
            <span class="availability-pill">Freelance</span>
            <span class="availability-pill">Collabs</span>
          </div>
          
          <div class="contact-cards">
            <div class="contact-card" id="emailCard">
              <div class="contact-card-content">
                <div class="contact-card-icon">✉</div>
                <div class="contact-card-info">
                  <div class="contact-card-label">Email</div>
                  <div class="contact-card-value" id="emailValue">no360717@gmail.com</div>
                </div>
              </div>
              <button class="contact-card-button" id="copyEmailBtn" aria-label="Copy email">Copy</button>
            </div>
            
            <a href="https://www.linkedin.com/in/alvin-zhou-392763218/" target="_blank" rel="noopener noreferrer" class="contact-card contact-card-link">
              <div class="contact-card-content">
                <div class="contact-card-icon">💼</div>
                <div class="contact-card-info">
                  <div class="contact-card-label">LinkedIn</div>
                  <div class="contact-card-value">Connect with me</div>
                </div>
              </div>
              <div class="contact-card-arrow">→</div>
            </a>
            
            <a href="./assets/pdf/resume/resumealvin.pdf" target="_blank" rel="noopener noreferrer" class="contact-card contact-card-link">
              <div class="contact-card-content">
                <div class="contact-card-icon">📄</div>
                <div class="contact-card-info">
                  <div class="contact-card-label">Resume</div>
                  <div class="contact-card-value">My Resume</div>
                </div>
              </div>
              <div class="contact-card-arrow">→</div>
            </a>
          </div>
        </div>
        
        <div class="contact-right">
          <div class="contact-form-panel">
            <h2 class="contact-form-title">Send a Message</h2>
            <form id="contactForm" novalidate>
              <div class="form-group">
                <label for="contactName">Name</label>
                <input type="text" id="contactName" name="name" required aria-required="true">
                <span class="form-error" id="nameError"></span>
              </div>
              
              <div class="form-group">
                <label for="contactEmail">Email</label>
                <input type="email" id="contactEmail" name="email" required aria-required="true">
                <span class="form-error" id="emailError"></span>
              </div>
              
              <div class="form-group">
                <label for="contactSubject">Subject</label>
                <select id="contactSubject" name="subject" required aria-required="true">
                  <option value="">Select a subject</option>
                  <option value="Collaboration">Collaboration</option>
                  <option value="Internship">Internship</option>
                  <option value="Speaking">Speaking</option>
                  <option value="Other">Other</option>
                </select>
                <span class="form-error" id="subjectError"></span>
              </div>
              
              <div class="form-group">
                <label for="contactMessage">Message</label>
                <textarea id="contactMessage" name="message" rows="6" required aria-required="true"></textarea>
                <span class="form-error" id="messageError"></span>
              </div>
              
              <button type="submit" class="contact-submit-button">Send Message</button>
            </form>
            
            <div id="contactSuccess" class="contact-success" style="display:none;" aria-live="polite">
              ✓ Message prepared! Your email client will open.
            </div>
          </div>
        </div>
      </div>
      
      <div id="toast" class="toast" aria-live="polite" role="status"></div>
    </div>
  </div>
  <footer>
    <div class="footer-container">
      <div class="footer-cta">
        <h2>Let's Get Connected</h2>
        <p>Ready to collaborate or have a project in mind? Let's talk!</p>
        <a href="#contact" class="footer-cta-button">Contact Me</a>
      </div>
      
      <div class="footer-section footer-brand">
        <h3>Alvin Zhou</h3>
        <p>Graphic & Interaction Designer</p>
      </div>
      
      <div class="footer-section">
        <h3>Navigation</h3>
        <ul class="footer-nav">
          <li><a href="#home">Home</a></li>
          <li><a href="#about">About</a></li>
          <li><a href="#works">Works</a></li>
          <li><a href="#contact">Contact</a></li>
        </ul>
      </div>
      
      <div class="footer-section">
        <h3>Connect</h3>
        <div class="footer-links">
          <a href="https://www.linkedin.com/in/alvin-zhou-392763218/" target="_blank" rel="noopener noreferrer">LinkedIn</a>
          <a href="./assets/pdf/resume/resumealvin.pdf" target="_blank" rel="noopener noreferrer">Resume</a>
        </div>
      </div>
      
      <div class="footer-copyright">
        <p>&copy; 2024 Alvin Zhou. All rights reserved.</p>
      </div>
    </div>
  </footer>
  
  <!-- Cursor trail canvas -->
  <!-- Project Modal -->
  <div id="project-modal" class="modal-overlay" aria-hidden="true">
    <div class="modal-card" role="dialog" aria-modal="true" aria-labelledby="modal-title" aria-describedby="modal-summary">
      <button class="modal-close" type="button" aria-label="Close popup">×</button>

      <div class="modal-header">
        <h2 id="modal-title"></h2>
        <div id="modal-subtitle" class="modal-subtitle"></div>
      </div>

      <div class="modal-body">
        <p id="modal-summary"></p>

        <h3 class="modal-section-title">Tools Used</h3>
        <ul id="modal-tools" class="modal-tools"></ul>

        <div class="modal-actions">
          <a href="#works" class="home-button modal-learn-more">Learn More</a>
        </div>
      </div>
    </div>
  </div>
  
  <!-- Works Modal -->
  <div id="works-modal" class="modal-overlay" aria-hidden="true">
    <div class="modal-card works-modal-card" role="dialog" aria-modal="true" aria-labelledby="works-modal-title" aria-describedby="works-modal-description">
      <button class="modal-close" type="button" aria-label="Close popup">×</button>

      <div class="works-modal-media-container" id="works-modal-media-container">
        <!-- Single image fallback -->
        <div class="works-modal-image-container" id="works-modal-single-image">
          <img id="works-modal-image" class="works-modal-image" src="" alt="" />
          <div id="works-modal-image-placeholder" class="works-modal-image-placeholder">
            <span>Image Coming Soon</span>
          </div>
        </div>
        
        <!-- Media carousel for multiple items -->
        <div class="works-modal-carousel" id="works-modal-carousel" style="display: none;">
          <button class="works-carousel-arrow works-carousel-arrow-left" id="worksCarouselPrev" aria-label="Previous media" type="button">‹</button>
          
          <div class="works-carousel-content" id="works-carousel-content">
            <!-- Video player -->
            <div class="works-carousel-item works-carousel-video" id="works-carousel-video" style="display: none;">
              <video id="works-modal-video" controls playsinline preload="metadata">
                <source id="works-modal-video-source" src="" type="video/mp4">
                Your browser does not support video playback.
              </video>
            </div>
            
            <!-- PDF viewer -->
            <div class="works-carousel-item works-carousel-pdf" id="works-carousel-pdf" style="display: none;">
              <embed id="works-modal-pdf" src="" type="application/pdf" />
              <a id="works-modal-pdf-download" href="" target="_blank" class="works-pdf-download-btn">
                View Full PDF ↗
              </a>
              <div class="works-pdf-note">If the preview doesn’t load in your browser, use “View Full PDF”.</div>
            </div>
            
            <!-- Image -->
            <div class="works-carousel-item works-carousel-image" id="works-carousel-image-item" style="display: none;">
              <img id="works-carousel-image" src="" alt="" />
            </div>
          </div>
          
          <button class="works-carousel-arrow works-carousel-arrow-right" id="worksCarouselNext" aria-label="Next media" type="button">›</button>
          
          <!-- Media indicator dots -->
          <div class="works-carousel-indicators" id="works-carousel-indicators"></div>
          
          <!-- Media label -->
          <div class="works-carousel-label" id="works-carousel-label"></div>
        </div>
      </div>

      <div class="modal-header">
        <h2 id="works-modal-title"></h2>
        <div class="works-modal-meta">
          <span id="works-modal-date" class="works-modal-date"></span>
          <span class="works-modal-divider">•</span>
          <span id="works-modal-medium" class="works-modal-medium"></span>
        </div>
      </div>

      <div class="modal-body">
        <p id="works-modal-description" class="works-modal-description"></p>
        
        <!-- Links section for documents/external resources -->
        <div id="works-modal-links" class="works-modal-links" style="display: none;">
        </div>
      </div>
    </div>
  </div>
  
  <!-- Image Zoom Overlay - Must be after modals for highest z-index layer -->
  <div class="image-zoom-overlay" id="image-zoom-overlay" aria-hidden="true">
    <button class="image-zoom-close" id="image-zoom-close" aria-label="Close zoom">&times;</button>
    <img id="image-zoom-img" src="" alt="Zoomed image" />
    <div class="image-zoom-hint">Click anywhere to close</div>
  </div>
  
  <script>
    // Works modal close handlers - must be after modal HTML exists
    (function() {
      const worksModal = document.getElementById('works-modal');
      const worksModalClose = document.querySelector('#works-modal .modal-close');
      
      if (worksModalClose) {
        worksModalClose.addEventListener('click', function(e) {
          e.preventDefault();
          e.stopPropagation();
          if (typeof window.closeWorkModal === 'function') {
            window.closeWorkModal();
          }
        });
      }
      
      if (worksModal) {
        worksModal.addEventListener('click', function(e) {
          if (e.target === worksModal) {
            e.preventDefault();
            e.stopPropagation();
            if (typeof window.closeWorkModal === 'function') {
              window.closeWorkModal();
            }
          }
        });
      }
      
      // Setup carousel arrow handlers (after DOM is ready)
      const prevBtn = document.getElementById('worksCarouselPrev');
      const nextBtn = document.getElementById('worksCarouselNext');
      
      if (prevBtn) {
        prevBtn.addEventListener('click', function(e) {
          e.preventDefault();
          e.stopPropagation();
          if (typeof window.worksCarouselPrev === 'function') {
            window.worksCarouselPrev();
          }
        });
      }
      if (nextBtn) {
        nextBtn.addEventListener('click', function(e) {
          e.preventDefault();
          e.stopPropagation();
          if (typeof window.worksCarouselNext === 'function') {
            window.worksCarouselNext();
          }
        });
      }
      
      // Setup image zoom handlers
      const zoomOverlay = document.getElementById('image-zoom-overlay');
      const zoomClose = document.getElementById('image-zoom-close');
      const zoomImg = document.getElementById('image-zoom-img');
      
      // Close zoom on overlay background click
      if (zoomOverlay) {
        zoomOverlay.addEventListener('click', function(e) {
          if (e.target === zoomOverlay) {
            if (typeof window.closeImageZoom === 'function') {
              window.closeImageZoom();
            }
          }
        });
      }
      
      // Close zoom on image click
      if (zoomImg) {
        zoomImg.addEventListener('click', function(e) {
          e.stopPropagation();
          if (typeof window.closeImageZoom === 'function') {
            window.closeImageZoom();
          }
        });
      }
      
      // Close zoom on close button click
      if (zoomClose) {
        zoomClose.addEventListener('click', function(e) {
          e.preventDefault();
          e.stopPropagation();
          if (typeof window.closeImageZoom === 'function') {
            window.closeImageZoom();
          }
        });
      }
      
      // Open zoom when clicking carousel image
      document.addEventListener('click', function(e) {
        if (e.target && e.target.id === 'works-carousel-image') {
          e.preventDefault();
          if (typeof window.openImageZoom === 'function') {
            window.openImageZoom(e.target.src, e.target.alt);
          }
        }
      });
    })();
  </script>
</body>
</html>
              